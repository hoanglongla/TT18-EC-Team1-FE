{"ast":null,"code":"var _jsxFileName = \"D:\\\\Team6-FE\\\\isomorphic\\\\shared\\\\isomorphic\\\\containers\\\\FirestoreCRUD\\\\Article\\\\Article.js\";\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport articleActions from '@iso/redux/articles/actions';\nimport Input, { Textarea } from '@iso/components/uielements/input';\nimport Select, { SelectOption as Option } from '@iso/components/uielements/select';\nimport Modal from '@iso/components/Feedback/Modal';\nimport LayoutContentWrapper from '@iso/components/utility/layoutWrapper';\nimport Box from '@iso/components/utility/box';\nimport ContentHolder from '@iso/components/utility/contentHolder';\nimport Popconfirms from '@iso/components/Feedback/Popconfirm';\nimport { ActionBtn, Fieldset, Form, Label, TitleWrapper, ButtonHolders, ActionWrapper, ComponentTitle, TableWrapper, StatusTag } from './Article.styles';\nconst {\n  loadFromFireStore,\n  resetFireStoreDocuments,\n  saveIntoFireStore,\n  toggleModal,\n  update\n} = articleActions;\nexport default function Articles() {\n  const {\n    articles,\n    article,\n    modalActive,\n    isLoading\n  } = useSelector(state => state.Articles);\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    dispatch(loadFromFireStore());\n  }, [dispatch]);\n\n  const handleRecord = (actionName, article) => {\n    if (article.key && actionName !== 'delete') actionName = 'update';\n    dispatch(saveIntoFireStore(article, actionName));\n  };\n\n  const resetRecords = () => {\n    dispatch(resetFireStoreDocuments());\n  };\n\n  const handleModal = (article = null) => {\n    dispatch(toggleModal(article));\n  };\n\n  const onRecordChange = (event, key) => {\n    if (key) article[key] = event.target.value;\n    dispatch(update(article));\n  };\n\n  const onSelectChange = (key, value) => {\n    if (key) article[key] = value;\n    dispatch(update(article));\n  };\n\n  const dataSource = [];\n  Object.keys(articles).map((article, index) => {\n    return dataSource.push({ ...articles[article],\n      key: article\n    });\n  });\n  const rowSelection = {\n    onChange: (selectedRowKeys, selectedRows) => {}\n  };\n  const columns = [{\n    title: 'Title',\n    dataIndex: 'title',\n    key: 'title',\n    width: '200px',\n    sorter: (a, b) => {\n      if (a.title < b.title) return -1;\n      if (a.title > b.title) return 1;\n      return 0;\n    },\n    render: (text, row) => {\n      const trimByWord = sentence => {\n        let result = sentence;\n        let resultArray = result.split(' ');\n\n        if (resultArray.length > 7) {\n          resultArray = resultArray.slice(0, 7);\n          result = resultArray.join(' ') + '...';\n        }\n\n        return result;\n      };\n\n      return trimByWord(row.title);\n    }\n  }, {\n    title: 'Description',\n    dataIndex: 'description',\n    key: 'description',\n    width: '360px',\n    sorter: (a, b) => {\n      if (a.description < b.description) return -1;\n      if (a.description > b.description) return 1;\n      return 0;\n    },\n    render: (text, row) => {\n      const trimByWord = sentence => {\n        let result = sentence;\n        let resultArray = result.split(' ');\n\n        if (resultArray.length > 20) {\n          resultArray = resultArray.slice(0, 20);\n          result = resultArray.join(' ') + '...';\n        }\n\n        return result;\n      };\n\n      return trimByWord(row.description);\n    }\n  }, {\n    title: 'Excerpt',\n    dataIndex: 'excerpt',\n    key: 'excerpt',\n    width: '220px',\n    sorter: (a, b) => {\n      if (a.excerpt < b.excerpt) return -1;\n      if (a.excerpt > b.excerpt) return 1;\n      return 0;\n    },\n    render: (text, row) => {\n      const trimByWord = sentence => {\n        let result = sentence;\n        let resultArray = result.split(' ');\n\n        if (resultArray.length > 8) {\n          resultArray = resultArray.slice(0, 8);\n          result = resultArray.join(' ') + '...';\n        }\n\n        return result;\n      };\n\n      return trimByWord(row.excerpt);\n    }\n  }, {\n    title: 'Slugs',\n    dataIndex: 'slug',\n    width: '170px',\n    key: 'slug',\n    sorter: (a, b) => {\n      if (a.slug < b.slug) return -1;\n      if (a.slug > b.slug) return 1;\n      return 0;\n    }\n  }, {\n    title: 'Status',\n    dataIndex: 'status',\n    className: 'noWrapCell',\n    key: 'status',\n    sorter: (a, b) => {\n      if (a.status < b.status) return -1;\n      if (a.status > b.status) return 1;\n      return 0;\n    },\n    render: (text, row) => {\n      let className;\n\n      if (row.status === ('draft' || 'Draft' || 'DRAFT')) {\n        className = 'draft';\n      } else if (row.status === ('publish' || 'Publish' || 'PUBLISH')) {\n        className = 'publish';\n      }\n\n      return /*#__PURE__*/React.createElement(StatusTag, {\n        className: className,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 16\n        }\n      }, row.status);\n    }\n  }, {\n    title: 'Actions',\n    key: 'action',\n    width: '60px',\n    className: 'noWrapCell',\n    render: (text, row) => {\n      return /*#__PURE__*/React.createElement(ActionWrapper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => handleModal(row),\n        href: \"# \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ion-android-create\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Popconfirms, {\n        title: \"Are you sure to delete this article\\uFF1F\",\n        okText: \"Yes\",\n        cancelText: \"No\",\n        placement: \"topRight\",\n        onConfirm: () => handleRecord('delete', row),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"deleteBtn\",\n        href: \"# \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ion-android-delete\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 17\n        }\n      }))));\n    }\n  }];\n  return /*#__PURE__*/React.createElement(LayoutContentWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ContentHolder, {\n    style: {\n      marginTop: 0,\n      overflow: 'hidden'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TitleWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ComponentTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, \"Articles\"), /*#__PURE__*/React.createElement(ButtonHolders, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ActionBtn, {\n    type: \"danger\",\n    onClick: resetRecords,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 15\n    }\n  }, \"Reset record\"), /*#__PURE__*/React.createElement(ActionBtn, {\n    type: \"primary\",\n    onClick: () => handleModal(null),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }, \"Add new record\"))), /*#__PURE__*/React.createElement(Modal, {\n    visible: modalActive,\n    onClose: () => dispatch(toggleModal(null)),\n    title: article.key ? 'Update Article' : 'Add New Article',\n    okText: article.key ? 'Update Article' : 'Add Article',\n    onOk: () => handleRecord('insert', article),\n    onCancel: () => dispatch(toggleModal(null)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(Input, {\n    label: \"Title\",\n    placeholder: \"Enter Title\",\n    value: article.title,\n    onChange: e => onRecordChange(e, 'title'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 17\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(Textarea, {\n    label: \"Description\",\n    placeholder: \"Enter Description\",\n    rows: 5,\n    value: article.description,\n    onChange: e => onRecordChange(e, 'description'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }\n  }, \"Excerpt\"), /*#__PURE__*/React.createElement(Textarea, {\n    label: \"Excerpt\",\n    rows: 5,\n    placeholder: \"Enter excerpt\",\n    value: article.excerpt,\n    onChange: e => onRecordChange(e, 'excerpt'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }\n  }, \"Slug\"), /*#__PURE__*/React.createElement(Input, {\n    label: \"Slug\",\n    placeholder: \"Enter Slugs\",\n    value: article.slug,\n    onChange: e => onRecordChange(e, 'slug'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Fieldset, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 17\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(Select, {\n    defaultValue: article.status,\n    placeholder: \"Enter Status\",\n    onChange: value => onSelectChange('status', value),\n    style: {\n      width: '170px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Option, {\n    value: \"draft\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 19\n    }\n  }, \"Draft\"), /*#__PURE__*/React.createElement(Option, {\n    value: \"publish\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 19\n    }\n  }, \"Publish\"))))), /*#__PURE__*/React.createElement(TableWrapper, {\n    rowKey: \"key\",\n    rowSelection: rowSelection,\n    columns: columns,\n    bordered: true,\n    dataSource: dataSource,\n    loading: isLoading,\n    className: \"isoSimpleTable\",\n    pagination: {\n      // defaultPageSize: 1,\n      hideOnSinglePage: true,\n      total: dataSource.length,\n      showTotal: (total, range) => {\n        return `Showing ${range[0]}-${range[1]} of ${dataSource.length} Results`;\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["D:/Team6-FE/isomorphic/shared/isomorphic/containers/FirestoreCRUD/Article/Article.js"],"names":["React","useDispatch","useSelector","articleActions","Input","Textarea","Select","SelectOption","Option","Modal","LayoutContentWrapper","Box","ContentHolder","Popconfirms","ActionBtn","Fieldset","Form","Label","TitleWrapper","ButtonHolders","ActionWrapper","ComponentTitle","TableWrapper","StatusTag","loadFromFireStore","resetFireStoreDocuments","saveIntoFireStore","toggleModal","update","Articles","articles","article","modalActive","isLoading","state","dispatch","useEffect","handleRecord","actionName","key","resetRecords","handleModal","onRecordChange","event","target","value","onSelectChange","dataSource","Object","keys","map","index","push","rowSelection","onChange","selectedRowKeys","selectedRows","columns","title","dataIndex","width","sorter","a","b","render","text","row","trimByWord","sentence","result","resultArray","split","length","slice","join","description","excerpt","slug","className","status","marginTop","overflow","e","hideOnSinglePage","total","showTotal","range"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport articleActions from '@iso/redux/articles/actions';\r\nimport Input, { Textarea } from '@iso/components/uielements/input';\r\nimport Select, {\r\n  SelectOption as Option,\r\n} from '@iso/components/uielements/select';\r\nimport Modal from '@iso/components/Feedback/Modal';\r\nimport LayoutContentWrapper from '@iso/components/utility/layoutWrapper';\r\nimport Box from '@iso/components/utility/box';\r\nimport ContentHolder from '@iso/components/utility/contentHolder';\r\nimport Popconfirms from '@iso/components/Feedback/Popconfirm';\r\nimport {\r\n  ActionBtn,\r\n  Fieldset,\r\n  Form,\r\n  Label,\r\n  TitleWrapper,\r\n  ButtonHolders,\r\n  ActionWrapper,\r\n  ComponentTitle,\r\n  TableWrapper,\r\n  StatusTag,\r\n} from './Article.styles';\r\nconst {\r\n  loadFromFireStore,\r\n  resetFireStoreDocuments,\r\n  saveIntoFireStore,\r\n  toggleModal,\r\n  update,\r\n} = articleActions;\r\nexport default function Articles() {\r\n  const { articles, article, modalActive, isLoading } = useSelector(\r\n    state => state.Articles\r\n  );\r\n  const dispatch = useDispatch();\r\n  React.useEffect(() => {\r\n    dispatch(loadFromFireStore());\r\n  }, [dispatch]);\r\n  const handleRecord = (actionName, article) => {\r\n    if (article.key && actionName !== 'delete') actionName = 'update';\r\n    dispatch(saveIntoFireStore(article, actionName));\r\n  };\r\n  const resetRecords = () => {\r\n    dispatch(resetFireStoreDocuments());\r\n  };\r\n\r\n  const handleModal = (article = null) => {\r\n    dispatch(toggleModal(article));\r\n  };\r\n\r\n  const onRecordChange = (event, key) => {\r\n    if (key) article[key] = event.target.value;\r\n    dispatch(update(article));\r\n  };\r\n\r\n  const onSelectChange = (key, value) => {\r\n    if (key) article[key] = value;\r\n    dispatch(update(article));\r\n  };\r\n\r\n  const dataSource = [];\r\n  Object.keys(articles).map((article, index) => {\r\n    return dataSource.push({\r\n      ...articles[article],\r\n      key: article,\r\n    });\r\n  });\r\n\r\n  const rowSelection = {\r\n    onChange: (selectedRowKeys, selectedRows) => {},\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Title',\r\n      dataIndex: 'title',\r\n      key: 'title',\r\n      width: '200px',\r\n      sorter: (a, b) => {\r\n        if (a.title < b.title) return -1;\r\n        if (a.title > b.title) return 1;\r\n        return 0;\r\n      },\r\n      render: (text, row) => {\r\n        const trimByWord = sentence => {\r\n          let result = sentence;\r\n          let resultArray = result.split(' ');\r\n          if (resultArray.length > 7) {\r\n            resultArray = resultArray.slice(0, 7);\r\n            result = resultArray.join(' ') + '...';\r\n          }\r\n          return result;\r\n        };\r\n\r\n        return trimByWord(row.title);\r\n      },\r\n    },\r\n    {\r\n      title: 'Description',\r\n      dataIndex: 'description',\r\n      key: 'description',\r\n      width: '360px',\r\n      sorter: (a, b) => {\r\n        if (a.description < b.description) return -1;\r\n        if (a.description > b.description) return 1;\r\n        return 0;\r\n      },\r\n      render: (text, row) => {\r\n        const trimByWord = sentence => {\r\n          let result = sentence;\r\n          let resultArray = result.split(' ');\r\n          if (resultArray.length > 20) {\r\n            resultArray = resultArray.slice(0, 20);\r\n            result = resultArray.join(' ') + '...';\r\n          }\r\n          return result;\r\n        };\r\n\r\n        return trimByWord(row.description);\r\n      },\r\n    },\r\n    {\r\n      title: 'Excerpt',\r\n      dataIndex: 'excerpt',\r\n      key: 'excerpt',\r\n      width: '220px',\r\n      sorter: (a, b) => {\r\n        if (a.excerpt < b.excerpt) return -1;\r\n        if (a.excerpt > b.excerpt) return 1;\r\n        return 0;\r\n      },\r\n      render: (text, row) => {\r\n        const trimByWord = sentence => {\r\n          let result = sentence;\r\n          let resultArray = result.split(' ');\r\n          if (resultArray.length > 8) {\r\n            resultArray = resultArray.slice(0, 8);\r\n            result = resultArray.join(' ') + '...';\r\n          }\r\n          return result;\r\n        };\r\n\r\n        return trimByWord(row.excerpt);\r\n      },\r\n    },\r\n    {\r\n      title: 'Slugs',\r\n      dataIndex: 'slug',\r\n      width: '170px',\r\n      key: 'slug',\r\n      sorter: (a, b) => {\r\n        if (a.slug < b.slug) return -1;\r\n        if (a.slug > b.slug) return 1;\r\n        return 0;\r\n      },\r\n    },\r\n    {\r\n      title: 'Status',\r\n      dataIndex: 'status',\r\n      className: 'noWrapCell',\r\n      key: 'status',\r\n      sorter: (a, b) => {\r\n        if (a.status < b.status) return -1;\r\n        if (a.status > b.status) return 1;\r\n        return 0;\r\n      },\r\n\r\n      render: (text, row) => {\r\n        let className;\r\n        if (row.status === ('draft' || 'Draft' || 'DRAFT')) {\r\n          className = 'draft';\r\n        } else if (row.status === ('publish' || 'Publish' || 'PUBLISH')) {\r\n          className = 'publish';\r\n        }\r\n        return <StatusTag className={className}>{row.status}</StatusTag>;\r\n      },\r\n    },\r\n    {\r\n      title: 'Actions',\r\n      key: 'action',\r\n      width: '60px',\r\n      className: 'noWrapCell',\r\n      render: (text, row) => {\r\n        return (\r\n          <ActionWrapper>\r\n            <a onClick={() => handleModal(row)} href=\"# \">\r\n              <i className=\"ion-android-create\" />\r\n            </a>\r\n\r\n            <Popconfirms\r\n              title=\"Are you sure to delete this article？\"\r\n              okText=\"Yes\"\r\n              cancelText=\"No\"\r\n              placement=\"topRight\"\r\n              onConfirm={() => handleRecord('delete', row)}\r\n            >\r\n              <a className=\"deleteBtn\" href=\"# \">\r\n                <i className=\"ion-android-delete\" />\r\n              </a>\r\n            </Popconfirms>\r\n          </ActionWrapper>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <LayoutContentWrapper>\r\n      <Box>\r\n        <ContentHolder style={{ marginTop: 0, overflow: 'hidden' }}>\r\n          <TitleWrapper>\r\n            <ComponentTitle>Articles</ComponentTitle>\r\n\r\n            <ButtonHolders>\r\n              <ActionBtn type=\"danger\" onClick={resetRecords}>\r\n                Reset record\r\n              </ActionBtn>\r\n\r\n              <ActionBtn type=\"primary\" onClick={() => handleModal(null)}>\r\n                Add new record\r\n              </ActionBtn>\r\n            </ButtonHolders>\r\n          </TitleWrapper>\r\n\r\n          <Modal\r\n            visible={modalActive}\r\n            onClose={() => dispatch(toggleModal(null))}\r\n            title={article.key ? 'Update Article' : 'Add New Article'}\r\n            okText={article.key ? 'Update Article' : 'Add Article'}\r\n            onOk={() => handleRecord('insert', article)}\r\n            onCancel={() => dispatch(toggleModal(null))}\r\n          >\r\n            <Form>\r\n              <Fieldset>\r\n                <Label>Title</Label>\r\n                <Input\r\n                  label=\"Title\"\r\n                  placeholder=\"Enter Title\"\r\n                  value={article.title}\r\n                  onChange={e => onRecordChange(e, 'title')}\r\n                />\r\n              </Fieldset>\r\n\r\n              <Fieldset>\r\n                <Label>Description</Label>\r\n                <Textarea\r\n                  label=\"Description\"\r\n                  placeholder=\"Enter Description\"\r\n                  rows={5}\r\n                  value={article.description}\r\n                  onChange={e => onRecordChange(e, 'description')}\r\n                />\r\n              </Fieldset>\r\n\r\n              <Fieldset>\r\n                <Label>Excerpt</Label>\r\n                <Textarea\r\n                  label=\"Excerpt\"\r\n                  rows={5}\r\n                  placeholder=\"Enter excerpt\"\r\n                  value={article.excerpt}\r\n                  onChange={e => onRecordChange(e, 'excerpt')}\r\n                />\r\n              </Fieldset>\r\n\r\n              <Fieldset>\r\n                <Label>Slug</Label>\r\n\r\n                <Input\r\n                  label=\"Slug\"\r\n                  placeholder=\"Enter Slugs\"\r\n                  value={article.slug}\r\n                  onChange={e => onRecordChange(e, 'slug')}\r\n                />\r\n              </Fieldset>\r\n\r\n              <Fieldset>\r\n                <Label>Status</Label>\r\n                <Select\r\n                  defaultValue={article.status}\r\n                  placeholder=\"Enter Status\"\r\n                  onChange={value => onSelectChange('status', value)}\r\n                  style={{ width: '170px' }}\r\n                >\r\n                  <Option value=\"draft\">Draft</Option>\r\n                  <Option value=\"publish\">Publish</Option>\r\n                </Select>\r\n              </Fieldset>\r\n            </Form>\r\n          </Modal>\r\n          <TableWrapper\r\n            rowKey=\"key\"\r\n            rowSelection={rowSelection}\r\n            columns={columns}\r\n            bordered={true}\r\n            dataSource={dataSource}\r\n            loading={isLoading}\r\n            className=\"isoSimpleTable\"\r\n            pagination={{\r\n              // defaultPageSize: 1,\r\n              hideOnSinglePage: true,\r\n              total: dataSource.length,\r\n              showTotal: (total, range) => {\r\n                return `Showing ${range[0]}-${range[1]} of ${\r\n                  dataSource.length\r\n                } Results`;\r\n              },\r\n            }}\r\n          />\r\n        </ContentHolder>\r\n      </Box>\r\n    </LayoutContentWrapper>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}