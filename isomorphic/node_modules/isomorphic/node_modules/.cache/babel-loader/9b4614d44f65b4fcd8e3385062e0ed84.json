{"ast":null,"code":"var _jsxFileName = \"D:\\\\TT18-EC-Team1-FE\\\\isomorphic\\\\shared\\\\isomorphic\\\\containers\\\\UIElements\\\\Tree\\\\AsyncTree.js\";\nimport React from 'react';\nimport Tree, { TreeNode } from '@iso/components/uielements/tree';\n\nfunction generateTreeNodes(treeNode) {\n  const arr = [];\n  const key = treeNode.props.eventKey;\n\n  for (let i = 0; i < 3; i++) {\n    arr.push({\n      name: `leaf ${key}-${i}`,\n      key: `${key}-${i}`\n    });\n  }\n\n  return arr;\n}\n\nfunction setLeaf(treeData, curKey, level) {\n  const loopLeaf = (data, lev) => {\n    const l = lev - 1;\n    data.forEach(item => {\n      if (item.key.length > curKey.length ? item.key.indexOf(curKey) !== 0 : curKey.indexOf(item.key) !== 0) {\n        return;\n      }\n\n      if (item.children) {\n        loopLeaf(item.children, l);\n      } else if (l < 1) {\n        item.isLeaf = true;\n      }\n    });\n  };\n\n  loopLeaf(treeData, level + 1);\n}\n\nfunction getNewTreeData(treeData, curKey, child, level) {\n  const loop = data => {\n    if (level < 1 || curKey.length - 3 > level * 2) return;\n    data.forEach(item => {\n      if (curKey.indexOf(item.key) === 0) {\n        if (item.children) {\n          loop(item.children);\n        } else {\n          item.children = child;\n        }\n      }\n    });\n  };\n\n  loop(treeData);\n  setLeaf(treeData, curKey, level);\n}\n\nexport default function () {\n  const [treeData, setTreeData] = React.useState([]);\n  React.useEffect(() => {\n    const timer = setTimeout(() => {\n      setTreeData([{\n        name: 'pNode 01',\n        key: '0-0'\n      }, {\n        name: 'pNode 02',\n        key: '0-1'\n      }, {\n        name: 'pNode 03',\n        key: '0-2',\n        isLeaf: true\n      }]);\n    }, 100);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const onSelect = info => {};\n\n  const onLoadData = treeNode => {\n    return new Promise(resolve => {\n      setTimeout(() => {\n        const newTreeData = [...treeData];\n        getNewTreeData(treeData, treeNode.props.eventKey, generateTreeNodes(treeNode), 2);\n        setTreeData(newTreeData);\n        resolve();\n      }, 1000);\n    });\n  };\n\n  const loop = data => data.map(item => {\n    if (item.children) {\n      return /*#__PURE__*/React.createElement(TreeNode, {\n        title: item.name,\n        key: item.key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }\n      }, loop(item.children));\n    }\n\n    return /*#__PURE__*/React.createElement(TreeNode, {\n      title: item.name,\n      key: item.key,\n      isLeaf: item.isLeaf,\n      disabled: item.key === '0-0-0',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    });\n  });\n\n  const treeNodes = loop(treeData);\n  return /*#__PURE__*/React.createElement(Tree, {\n    onSelect: onSelect,\n    loadData: onLoadData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, treeNodes);\n}","map":{"version":3,"sources":["D:/TT18-EC-Team1-FE/isomorphic/shared/isomorphic/containers/UIElements/Tree/AsyncTree.js"],"names":["React","Tree","TreeNode","generateTreeNodes","treeNode","arr","key","props","eventKey","i","push","name","setLeaf","treeData","curKey","level","loopLeaf","data","lev","l","forEach","item","length","indexOf","children","isLeaf","getNewTreeData","child","loop","setTreeData","useState","useEffect","timer","setTimeout","clearTimeout","onSelect","info","onLoadData","Promise","resolve","newTreeData","map","treeNodes"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Tree, { TreeNode } from '@iso/components/uielements/tree';\r\n\r\nfunction generateTreeNodes(treeNode) {\r\n  const arr = [];\r\n  const key = treeNode.props.eventKey;\r\n  for (let i = 0; i < 3; i++) {\r\n    arr.push({ name: `leaf ${key}-${i}`, key: `${key}-${i}` });\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction setLeaf(treeData, curKey, level) {\r\n  const loopLeaf = (data, lev) => {\r\n    const l = lev - 1;\r\n    data.forEach(item => {\r\n      if (\r\n        item.key.length > curKey.length\r\n          ? item.key.indexOf(curKey) !== 0\r\n          : curKey.indexOf(item.key) !== 0\r\n      ) {\r\n        return;\r\n      }\r\n      if (item.children) {\r\n        loopLeaf(item.children, l);\r\n      } else if (l < 1) {\r\n        item.isLeaf = true;\r\n      }\r\n    });\r\n  };\r\n  loopLeaf(treeData, level + 1);\r\n}\r\n\r\nfunction getNewTreeData(treeData, curKey, child, level) {\r\n  const loop = data => {\r\n    if (level < 1 || curKey.length - 3 > level * 2) return;\r\n    data.forEach(item => {\r\n      if (curKey.indexOf(item.key) === 0) {\r\n        if (item.children) {\r\n          loop(item.children);\r\n        } else {\r\n          item.children = child;\r\n        }\r\n      }\r\n    });\r\n  };\r\n  loop(treeData);\r\n  setLeaf(treeData, curKey, level);\r\n}\r\n\r\nexport default function() {\r\n  const [treeData, setTreeData] = React.useState([]);\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setTreeData([\r\n        { name: 'pNode 01', key: '0-0' },\r\n        { name: 'pNode 02', key: '0-1' },\r\n        { name: 'pNode 03', key: '0-2', isLeaf: true },\r\n      ]);\r\n    }, 100);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  const onSelect = info => {};\r\n  const onLoadData = treeNode => {\r\n    return new Promise(resolve => {\r\n      setTimeout(() => {\r\n        const newTreeData = [...treeData];\r\n        getNewTreeData(\r\n          treeData,\r\n          treeNode.props.eventKey,\r\n          generateTreeNodes(treeNode),\r\n          2\r\n        );\r\n        setTreeData(newTreeData);\r\n        resolve();\r\n      }, 1000);\r\n    });\r\n  };\r\n  const loop = data =>\r\n    data.map(item => {\r\n      if (item.children) {\r\n        return (\r\n          <TreeNode title={item.name} key={item.key}>\r\n            {loop(item.children)}\r\n          </TreeNode>\r\n        );\r\n      }\r\n      return (\r\n        <TreeNode\r\n          title={item.name}\r\n          key={item.key}\r\n          isLeaf={item.isLeaf}\r\n          disabled={item.key === '0-0-0'}\r\n        />\r\n      );\r\n    });\r\n  const treeNodes = loop(treeData);\r\n  return (\r\n    <Tree onSelect={onSelect} loadData={onLoadData}>\r\n      {treeNodes}\r\n    </Tree>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}