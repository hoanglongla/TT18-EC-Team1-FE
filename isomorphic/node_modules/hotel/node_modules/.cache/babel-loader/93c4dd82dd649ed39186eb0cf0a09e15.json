{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\TT18-EC-Team1-FE\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\TT18-EC-Team1-FE\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\TT18-EC-Team1-FE\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"D:\\\\TT18-EC-Team1-FE\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"D:\\\\TT18-EC-Team1-FE\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\TT18-EC-Team1-FE\\\\isomorphic\\\\shared\\\\hotel\\\\components\\\\Search\\\\CategorySearch\\\\CategotySearch.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport Button from '@iso/ui/Antd/Button/Button';\nimport Slider from '@iso/ui/Antd/Slider/Slider';\nimport Checkbox from '@iso/ui/Antd/Checkbox/Checkbox';\nimport ViewWithPopup from '@iso/ui/UI/ViewWithPopup/ViewWithPopup';\nimport InputIncDec from '@iso/ui/InputIncDec/InputIncDec';\nimport DateRangePickerBox from '@iso/ui/DatePicker/ReactDates';\nimport { setStateToUrl, getStateFromUrl } from '../url_handler';\nimport { priceInit, getPropertyType } from '../SearchParams';\nimport axios from 'axios';\nimport categories from './categories';\nimport CategroySearchWrapper, { RoomGuestWrapper, ItemWrapper, ActionWrapper } from './CategorySearch.style';\n\nvar CategotySearch = function CategotySearch(_ref) {\n  var history = _ref.history,\n      location = _ref.location;\n  var searchParams = getStateFromUrl(location);\n  var state = {\n    amenities: searchParams.amenities || [],\n    property: searchParams.property || [],\n    date_range: searchParams.date_range || {\n      setStartDate: null,\n      setEndDate: null\n    },\n    price: searchParams.price || {\n      min: 0,\n      max: 100,\n      defaultMin: 0,\n      defaultMax: 100\n    },\n    location: searchParams.location || {\n      lat: null,\n      lng: null\n    },\n    room: parseInt(searchParams.room) || 0,\n    guest: parseInt(searchParams.guest) || 0\n  };\n  var amenities = state.amenities,\n      property = state.property,\n      date_range = state.date_range,\n      price = state.price,\n      room = state.room,\n      guest = state.guest; // Room guest state\n\n  var _useState = useState(room),\n      _useState2 = _slicedToArray(_useState, 2),\n      countRoom = _useState2[0],\n      setRoom = _useState2[1];\n\n  var _useState3 = useState(guest),\n      _useState4 = _slicedToArray(_useState3, 2),\n      countGuest = _useState4[0],\n      setGuest = _useState4[1]; // data handling\n\n\n  var _onChange = function onChange(value, type) {\n    var query = _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, type, value));\n\n    var search = setStateToUrl(query);\n    history.push({\n      pathname: '/listing',\n      search: search\n    });\n  };\n\n  var handleRoomGuestApply = function handleRoomGuestApply() {\n    var query = _objectSpread(_objectSpread({}, state), {}, {\n      room: countRoom,\n      guest: countGuest\n    });\n\n    var search = setStateToUrl(query);\n    history.push({\n      pathname: '/listing',\n      search: search\n    });\n  };\n\n  var options = function options() {\n    a;\n  };\n\n  var handleRoomGuestCancel = function handleRoomGuestCancel() {\n    setRoom(0);\n    setGuest(0);\n\n    var query = _objectSpread(_objectSpread({}, state), {}, {\n      room: 0,\n      guest: 0\n    });\n\n    var search = setStateToUrl(query);\n    history.push({\n      pathname: '/listing',\n      search: search\n    });\n  }; // Clear search data\n\n\n  var onSearchReset = function onSearchReset() {\n    setRoom(0);\n    setGuest(0);\n    var search = setStateToUrl({\n      reset: ''\n    });\n    history.push({\n      pathname: '/listing',\n      search: search\n    });\n  };\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      categories = _useState6[0],\n      setData = _useState6[1];\n\n  useEffect(function () {\n    var fetchData = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response, json;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return fetch(\"http://econail.localhost/g/product_category\");\n\n              case 3:\n                response = _context.sent;\n                _context.next = 6;\n                return response.json();\n\n              case 6:\n                json = _context.sent;\n                setData(json.data.data);\n                console.log(json);\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(\"error\", _context.t0);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 11]]);\n      }));\n\n      return function fetchData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, []);\n  return /*#__PURE__*/React.createElement(CategroySearchWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ViewWithPopup, {\n    className: property.length ? 'activated' : '',\n    key: getPropertyType.id,\n    noView: true,\n    view: /*#__PURE__*/React.createElement(Button, {\n      type: \"default\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, getPropertyType.name, property.length > 0 && \": \".concat(property.length)),\n    popup: /*#__PURE__*/React.createElement(Checkbox.Group, {\n      options: getPropertyType.options,\n      defaultValue: property,\n      onChange: function onChange(value) {\n        return _onChange(value, 'property');\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ViewWithPopup, {\n    className: price.min === price.defaultMin && price.max === price.defaultMax ? '' : 'activated',\n    key: 300,\n    noView: true,\n    view: /*#__PURE__*/React.createElement(Button, {\n      type: \"default\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, price.min > 0 || price.max < 100 ? \"Price: \".concat(price.min, \", \").concat(price.max) : \"Gi\\xE1\"),\n    popup: /*#__PURE__*/React.createElement(Slider, {\n      range: true,\n      marks: priceInit,\n      min: price.defaultMin,\n      max: price.defaultMax,\n      defaultValue: [price.min, price.max],\n      onAfterChange: function onAfterChange(value) {\n        return _onChange(value, 'price');\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"view_with__popup\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup_handler\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"default\",\n    onClick: onSearchReset,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, categories.map(function (data) {\n    /*#__PURE__*/\n    React.createElement(\"h1\", {\n      key: data.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }\n    }, \"Data:\", data.name);\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"view_with__popup\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup_handler\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"default\",\n    onClick: onSearchReset,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, \"C\\xE0i l\\u1EA1i\"))));\n};\n\nexport default CategotySearch;","map":{"version":3,"sources":["D:/TT18-EC-Team1-FE/isomorphic/shared/hotel/components/Search/CategorySearch/CategotySearch.js"],"names":["React","useState","useEffect","moment","Button","Slider","Checkbox","ViewWithPopup","InputIncDec","DateRangePickerBox","setStateToUrl","getStateFromUrl","priceInit","getPropertyType","axios","categories","CategroySearchWrapper","RoomGuestWrapper","ItemWrapper","ActionWrapper","CategotySearch","history","location","searchParams","state","amenities","property","date_range","setStartDate","setEndDate","price","min","max","defaultMin","defaultMax","lat","lng","room","parseInt","guest","countRoom","setRoom","countGuest","setGuest","onChange","value","type","query","search","push","pathname","handleRoomGuestApply","options","a","handleRoomGuestCancel","onSearchReset","reset","setData","fetchData","fetch","response","json","data","console","log","length","id","name","map"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport moment from 'moment';\r\nimport Button from '@iso/ui/Antd/Button/Button';\r\nimport Slider from '@iso/ui/Antd/Slider/Slider';\r\nimport Checkbox from '@iso/ui/Antd/Checkbox/Checkbox';\r\nimport ViewWithPopup from '@iso/ui/UI/ViewWithPopup/ViewWithPopup';\r\nimport InputIncDec from '@iso/ui/InputIncDec/InputIncDec';\r\nimport DateRangePickerBox from '@iso/ui/DatePicker/ReactDates';\r\nimport { setStateToUrl, getStateFromUrl } from '../url_handler';\r\nimport { priceInit, getPropertyType } from '../SearchParams';\r\nimport axios from 'axios';\r\nimport categories from './categories';\r\nimport CategroySearchWrapper, {\r\n  RoomGuestWrapper,\r\n  ItemWrapper,\r\n  ActionWrapper,\r\n} from './CategorySearch.style';\r\n\r\nconst CategotySearch = ({ history, location }) => {\r\n  const searchParams = getStateFromUrl(location);\r\n  const state = {\r\n    amenities: searchParams.amenities || [],\r\n    property: searchParams.property || [],\r\n    date_range: searchParams.date_range || {\r\n      setStartDate: null,\r\n      setEndDate: null,\r\n    },\r\n    price: searchParams.price || {\r\n      min: 0,\r\n      max: 100,\r\n      defaultMin: 0,\r\n      defaultMax: 100,\r\n    },\r\n    location: searchParams.location || {\r\n      lat: null,\r\n      lng: null,\r\n    },\r\n    room: parseInt(searchParams.room) || 0,\r\n    guest: parseInt(searchParams.guest) || 0,\r\n  };\r\n  const { amenities, property, date_range, price, room, guest } = state;\r\n\r\n  // Room guest state\r\n  const [countRoom, setRoom] = useState(room);\r\n  const [countGuest, setGuest] = useState(guest);\r\n\r\n  // data handling\r\n  const onChange = (value, type) => {\r\n    const query = {\r\n      ...state,\r\n      [type]: value,\r\n    };\r\n    const search = setStateToUrl(query);\r\n    history.push({\r\n      pathname: '/listing',\r\n      search: search,\r\n    });\r\n  };\r\n\r\n  const handleRoomGuestApply = () => {\r\n    const query = {\r\n      ...state,\r\n      room: countRoom,\r\n      guest: countGuest,\r\n    };\r\n    const search = setStateToUrl(query);\r\n    history.push({\r\n      pathname: '/listing',\r\n      search: search,\r\n    });\r\n  };\r\n  const options=() =>{\r\n    a\r\n\r\n  }\r\n  const handleRoomGuestCancel = () => {\r\n    setRoom(0);\r\n    setGuest(0);\r\n    const query = {\r\n      ...state,\r\n      room: 0,\r\n      guest: 0,\r\n    };\r\n    const search = setStateToUrl(query);\r\n    history.push({\r\n      pathname: '/listing',\r\n      search: search,\r\n    });\r\n  };\r\n\r\n  // Clear search data\r\n  const onSearchReset = () => {\r\n    setRoom(0);\r\n    setGuest(0);\r\n    const search = setStateToUrl({ reset: '' });\r\n    history.push({\r\n      pathname: '/listing',\r\n      search: search,\r\n    });\r\n  };\r\n  const [categories, setData] = useState([]);\r\n  useEffect(() => {\r\n     const fetchData = async () => {\r\n      try {\r\n        const response = await fetch(\"http://econail.localhost/g/product_category\");\r\n        const json = await response.json();\r\n        setData(json.data.data)\r\n        console.log(json);\r\n\t\t} catch (error) {\r\n        console.log(\"error\", error);\r\n\t\t}\r\n       \r\n       \r\n      \r\n     };\r\n     fetchData();\r\n   }, []);\r\n  return (\r\n    <CategroySearchWrapper>\r\n     \r\n      <ViewWithPopup\r\n        className={property.length ? 'activated' : ''}\r\n        key={getPropertyType.id}\r\n        noView={true}\r\n        view={\r\n          <Button type=\"default\">\r\n            {getPropertyType.name}\r\n            {property.length > 0 && `: ${property.length}`}\r\n          </Button>\r\n        }\r\n        popup={\r\n          \r\n          <Checkbox.Group\r\n            options={getPropertyType.options}\r\n            defaultValue={property}\r\n            onChange={value => onChange(value, 'property')}\r\n          />\r\n        }\r\n      />\r\n      \r\n      <ViewWithPopup\r\n        className={\r\n          price.min === price.defaultMin && price.max === price.defaultMax\r\n            ? ''\r\n            : 'activated'\r\n        }\r\n        key={300}\r\n        noView={true}\r\n        view={\r\n          <Button type=\"default\">\r\n            {price.min > 0 || price.max < 100\r\n              ? `Price: ${price.min}, ${price.max}`\r\n              : `Giá`}\r\n          </Button>\r\n        }\r\n        popup={\r\n          <Slider\r\n            range\r\n            marks={priceInit}\r\n            min={price.defaultMin}\r\n            max={price.defaultMax}\r\n            defaultValue={[price.min, price.max]}\r\n            onAfterChange={value => onChange(value, 'price')}\r\n          />\r\n        }\r\n      />\r\n \r\n      <div className=\"view_with__popup\">\r\n        <div className=\"popup_handler\">\r\n          <Button type=\"default\" onClick={onSearchReset}>\r\n          {categories.map((data)=>{\r\n        <h1 key={data.id}>Data:{data.name}</h1>\r\n      })}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className=\"view_with__popup\">\r\n        <div className=\"popup_handler\">\r\n          <Button type=\"default\" onClick={onSearchReset}>\r\n            Cài lại\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      \r\n    </CategroySearchWrapper>\r\n  );\r\n};\r\n\r\nexport default CategotySearch;\r\n"]},"metadata":{},"sourceType":"module"}