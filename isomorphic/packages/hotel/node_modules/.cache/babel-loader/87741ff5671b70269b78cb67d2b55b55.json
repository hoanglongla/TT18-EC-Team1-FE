{"ast":null,"code":"import _slicedToArray from \"D:\\\\TT18-EC-Team1-FE\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState } from 'react'; // utils\n\nvar isClient = typeof window === 'object';\n\nvar on = function on(obj) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return obj.addEventListener.apply(obj, args);\n};\n\nvar off = function off(obj) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  return obj.removeEventListener.apply(obj, args);\n};\n\nvar patchHistoryMethod = function patchHistoryMethod(method) {\n  var original = window.history[method];\n\n  window.history[method] = function (state) {\n    var result = original.apply(this, arguments);\n    var event = new Event(method.toLowerCase());\n    event.state = state;\n    window.dispatchEvent(event);\n    return result;\n  };\n};\n\nif (isClient) {\n  patchHistoryMethod('pushState');\n  patchHistoryMethod('replaceState');\n}\n\nexport var useLocation = function useLocation() {\n  var buildState = function buildState(trigger) {\n    var _window$history = window.history,\n        state = _window$history.state,\n        length = _window$history.length;\n    var _window$location = window.location,\n        hash = _window$location.hash,\n        host = _window$location.host,\n        hostname = _window$location.hostname,\n        href = _window$location.href,\n        origin = _window$location.origin,\n        pathname = _window$location.pathname,\n        port = _window$location.port,\n        protocol = _window$location.protocol,\n        search = _window$location.search;\n    return {\n      trigger: trigger,\n      state: state,\n      length: length,\n      hash: hash,\n      host: host,\n      hostname: hostname,\n      href: href,\n      origin: origin,\n      pathname: pathname,\n      port: port,\n      protocol: protocol,\n      search: search\n    };\n  };\n\n  var _useState = useState(isClient ? buildState('load') : {\n    trigger: 'load',\n    length: 1\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var onChange = function onChange(trigger) {\n    return setState(buildState(trigger));\n  };\n\n  var onPopstate = function onPopstate() {\n    return onChange('popstate');\n  };\n\n  var onPushstate = function onPushstate() {\n    return onChange('pushstate');\n  };\n\n  var onReplacestate = function onReplacestate() {\n    return onChange('replacestate');\n  };\n\n  useEffect(function () {\n    on(window, 'popstate', onPopstate);\n    on(window, 'pushstate', onPushstate);\n    on(window, 'replacestate', onReplacestate);\n    return function () {\n      off(window, 'popstate', onPopstate);\n      off(window, 'pushstate', onPushstate);\n      off(window, 'replacestate', onReplacestate);\n    };\n  }, [0]);\n  return state;\n};","map":{"version":3,"sources":["D:/TT18-EC-Team1-FE/isomorphic/shared/common/library/hooks/useLocation.js"],"names":["useEffect","useState","isClient","window","on","obj","args","addEventListener","off","removeEventListener","patchHistoryMethod","method","original","history","state","result","apply","arguments","event","Event","toLowerCase","dispatchEvent","useLocation","buildState","trigger","length","location","hash","host","hostname","href","origin","pathname","port","protocol","search","setState","onChange","onPopstate","onPushstate","onReplacestate"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\n// utils\r\nconst isClient = typeof window === 'object';\r\nconst on = (obj, ...args) => obj.addEventListener(...args);\r\nconst off = (obj, ...args) => obj.removeEventListener(...args);\r\n\r\nconst patchHistoryMethod = method => {\r\n  const original = window.history[method];\r\n  window.history[method] = function(state) {\r\n    const result = original.apply(this, arguments);\r\n    const event = new Event(method.toLowerCase());\r\n    event.state = state;\r\n    window.dispatchEvent(event);\r\n    return result;\r\n  };\r\n};\r\nif (isClient) {\r\n  patchHistoryMethod('pushState');\r\n  patchHistoryMethod('replaceState');\r\n}\r\nexport const useLocation = () => {\r\n  const buildState = trigger => {\r\n    const { state, length } = window.history;\r\n    const {\r\n      hash,\r\n      host,\r\n      hostname,\r\n      href,\r\n      origin,\r\n      pathname,\r\n      port,\r\n      protocol,\r\n      search,\r\n    } = window.location;\r\n    return {\r\n      trigger,\r\n      state,\r\n      length,\r\n      hash,\r\n      host,\r\n      hostname,\r\n      href,\r\n      origin,\r\n      pathname,\r\n      port,\r\n      protocol,\r\n      search,\r\n    };\r\n  };\r\n  const [state, setState] = useState(\r\n    isClient\r\n      ? buildState('load')\r\n      : {\r\n          trigger: 'load',\r\n          length: 1,\r\n        }\r\n  );\r\n  const onChange = trigger => setState(buildState(trigger));\r\n  const onPopstate = () => onChange('popstate');\r\n  const onPushstate = () => onChange('pushstate');\r\n  const onReplacestate = () => onChange('replacestate');\r\n  useEffect(() => {\r\n    on(window, 'popstate', onPopstate);\r\n    on(window, 'pushstate', onPushstate);\r\n    on(window, 'replacestate', onReplacestate);\r\n    return () => {\r\n      off(window, 'popstate', onPopstate);\r\n      off(window, 'pushstate', onPushstate);\r\n      off(window, 'replacestate', onReplacestate);\r\n    };\r\n  }, [0]);\r\n  return state;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}