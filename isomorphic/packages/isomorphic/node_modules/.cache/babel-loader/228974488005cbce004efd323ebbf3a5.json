{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isEqual2 = require('lodash/isEqual');\n\nvar _isEqual3 = _interopRequireDefault(_isEqual2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nexports.default = createConnector;\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n * @typedef {object} ConnectorDescription\n * @property {string} displayName - the displayName used by the wrapper\n * @property {function} refine - a function to filter the local state\n * @property {function} getSearchParameters - function transforming the local state to a SearchParameters\n * @property {function} getMetadata - metadata of the widget\n * @property {function} transitionState - hook after the state has changed\n * @property {function} getProvidedProps - transform the state into props passed to the wrapped component.\n * Receives (props, widgetStates, searchState, metadata) and returns the local state.\n * @property {function} getId - Receives props and return the id that will be used to identify the widget\n * @property {function} cleanUp - hook when the widget will unmount. Receives (props, searchState) and return a cleaned state.\n * @property {object} propTypes - PropTypes forwarded to the wrapped component.\n * @property {object} defaultProps - default values for the props\n */\n\n/**\n * Connectors are the HOC used to transform React components\n * into InstantSearch widgets.\n * In order to simplify the construction of such connectors\n * `createConnector` takes a description and transform it into\n * a connector.\n * @param {ConnectorDescription} connectorDesc the description of the connector\n * @return {Connector} a function that wraps a component into\n * an instantsearch connected one.\n */\n\n\nfunction createConnector(connectorDesc) {\n  if (!connectorDesc.displayName) {\n    throw new Error('`createConnector` requires you to provide a `displayName` property.');\n  }\n\n  var hasRefine = (0, _has3.default)(connectorDesc, 'refine');\n  var hasSearchForFacetValues = (0, _has3.default)(connectorDesc, 'searchForFacetValues');\n  var hasSearchParameters = (0, _has3.default)(connectorDesc, 'getSearchParameters');\n  var hasMetadata = (0, _has3.default)(connectorDesc, 'getMetadata');\n  var hasTransitionState = (0, _has3.default)(connectorDesc, 'transitionState');\n  var hasCleanUp = (0, _has3.default)(connectorDesc, 'cleanUp');\n  var isWidget = hasSearchParameters || hasMetadata || hasTransitionState;\n  return function (Composed) {\n    var _class, _temp, _initialiseProps;\n\n    return _temp = _class = function (_Component) {\n      _inherits(Connector, _Component);\n\n      function Connector(props, context) {\n        _classCallCheck(this, Connector);\n\n        var _this = _possibleConstructorReturn(this, (Connector.__proto__ || Object.getPrototypeOf(Connector)).call(this, props, context));\n\n        _initialiseProps.call(_this);\n\n        var _context$ais = context.ais,\n            store = _context$ais.store,\n            widgetsManager = _context$ais.widgetsManager;\n        var canRender = false;\n        _this.state = {\n          props: _this.getProvidedProps(_extends({}, props, {\n            canRender: canRender\n          })),\n          canRender: canRender // use to know if a component is rendered (browser), or not (server).\n\n        };\n        _this.unsubscribe = store.subscribe(function () {\n          if (_this.state.canRender) {\n            _this.setState({\n              props: _this.getProvidedProps(_extends({}, _this.props, {\n                canRender: _this.state.canRender\n              }))\n            });\n          }\n        });\n\n        if (isWidget) {\n          _this.unregisterWidget = widgetsManager.registerWidget(_this);\n        }\n\n        if (process.env.NODE_ENV === 'development') {\n          var onlyGetProvidedPropsUsage = !Object.keys(connectorDesc).find(function (key) {\n            return ['getMetadata', 'getSearchParameters', 'refine', 'cleanUp'].indexOf(key) > -1;\n          });\n\n          if (onlyGetProvidedPropsUsage && connectorDesc.displayName.substr(0, 7) !== 'Algolia') {\n            // eslint-disable-next-line no-console\n            console.warn('react-instantsearch: it seems that you are using the `createConnector` api ' + 'only to access the `searchState` and the `searchResults` through `getProvidedProps`.' + 'We are now provided a dedicated API' + ' the `connectStateResults` connector that you should use instead. The `createConnector` API will be ' + 'soon deprecated and will break in future next major versions.' + '\\n\\n' + 'See more at https://community.algolia.com/react-instantsearch/connectors/connectStateResults.html' + '\\n' + 'and https://community.algolia.com/react-instantsearch/guide/Conditional_display.html');\n          }\n        }\n\n        return _this;\n      }\n\n      _createClass(Connector, [{\n        key: 'getMetadata',\n        value: function getMetadata(nextWidgetsState) {\n          if (hasMetadata) {\n            return connectorDesc.getMetadata.call(this, this.props, nextWidgetsState);\n          }\n\n          return {};\n        }\n      }, {\n        key: 'getSearchParameters',\n        value: function getSearchParameters(searchParameters) {\n          if (hasSearchParameters) {\n            return connectorDesc.getSearchParameters.call(this, searchParameters, this.props, this.context.ais.store.getState().widgets);\n          }\n\n          return null;\n        }\n      }, {\n        key: 'transitionState',\n        value: function transitionState(prevWidgetsState, nextWidgetsState) {\n          if (hasTransitionState) {\n            return connectorDesc.transitionState.call(this, this.props, prevWidgetsState, nextWidgetsState);\n          }\n\n          return nextWidgetsState;\n        }\n      }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n          this.setState({\n            canRender: true\n          });\n        }\n      }, {\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n          if (connectorDesc.getSearchParameters) {\n            this.context.ais.onSearchParameters(connectorDesc.getSearchParameters, this.context, this.props);\n          }\n        }\n      }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n          if (!(0, _isEqual3.default)(this.props, nextProps)) {\n            this.setState({\n              props: this.getProvidedProps(nextProps)\n            });\n\n            if (isWidget) {\n              // Since props might have changed, we need to re-run getSearchParameters\n              // and getMetadata with the new props.\n              this.context.ais.widgetsManager.update();\n\n              if (connectorDesc.transitionState) {\n                this.context.ais.onSearchStateChange(connectorDesc.transitionState.call(this, nextProps, this.context.ais.store.getState().widgets, this.context.ais.store.getState().widgets));\n              }\n            }\n          }\n        }\n      }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n          this.unsubscribe();\n\n          if (isWidget) {\n            this.unregisterWidget(); // will schedule an update\n\n            if (hasCleanUp) {\n              var newState = connectorDesc.cleanUp.call(this, this.props, this.context.ais.store.getState().widgets);\n              this.context.ais.store.setState(_extends({}, this.context.ais.store.getState(), {\n                widgets: newState\n              }));\n              this.context.ais.onSearchStateChange((0, _utils.removeEmptyKey)(newState));\n            }\n          }\n        }\n      }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          var propsEqual = (0, _utils.shallowEqual)(this.props, nextProps);\n\n          if (this.state.props === null || nextState.props === null) {\n            if (this.state.props === nextState.props) {\n              return !propsEqual;\n            }\n\n            return true;\n          }\n\n          return !propsEqual || !(0, _utils.shallowEqual)(this.state.props, nextState.props);\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          var _this2 = this;\n\n          if (this.state.props === null) {\n            return null;\n          }\n\n          var refineProps = hasRefine ? {\n            refine: this.refine,\n            createURL: this.createURL\n          } : {};\n          var searchForFacetValuesProps = hasSearchForFacetValues ? {\n            searchForItems: this.searchForFacetValues,\n            searchForFacetValues: function searchForFacetValues() {\n              if (process.env.NODE_ENV === 'development') {\n                // eslint-disable-next-line no-console\n                console.warn('react-instantsearch: `searchForFacetValues` has been renamed to' + '`searchForItems`, this will break in the next major version.');\n              }\n\n              _this2.searchForFacetValues.apply(_this2, arguments);\n            }\n          } : {};\n          return _react2.default.createElement(Composed, _extends({}, this.props, this.state.props, refineProps, searchForFacetValuesProps));\n        }\n      }]);\n\n      return Connector;\n    }(_react.Component), _class.displayName = connectorDesc.displayName + '(' + (0, _utils.getDisplayName)(Composed) + ')', _class.defaultClassNames = Composed.defaultClassNames, _class.propTypes = connectorDesc.propTypes, _class.defaultProps = connectorDesc.defaultProps, _class.contextTypes = {\n      // @TODO: more precise state manager propType\n      ais: _propTypes2.default.object.isRequired,\n      multiIndexContext: _propTypes2.default.object\n    }, _initialiseProps = function _initialiseProps() {\n      var _this3 = this;\n\n      this.getProvidedProps = function (props) {\n        var store = _this3.context.ais.store;\n\n        var _store$getState = store.getState(),\n            results = _store$getState.results,\n            searching = _store$getState.searching,\n            error = _store$getState.error,\n            widgets = _store$getState.widgets,\n            metadata = _store$getState.metadata,\n            resultsFacetValues = _store$getState.resultsFacetValues,\n            searchingForFacetValues = _store$getState.searchingForFacetValues,\n            isSearchStalled = _store$getState.isSearchStalled;\n\n        var searchResults = {\n          results: results,\n          searching: searching,\n          error: error,\n          searchingForFacetValues: searchingForFacetValues,\n          isSearchStalled: isSearchStalled\n        };\n        return connectorDesc.getProvidedProps.call(_this3, props, widgets, searchResults, metadata, resultsFacetValues);\n      };\n\n      this.refine = function () {\n        var _connectorDesc$refine;\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this3.context.ais.onInternalStateUpdate((_connectorDesc$refine = connectorDesc.refine).call.apply(_connectorDesc$refine, [_this3, _this3.props, _this3.context.ais.store.getState().widgets].concat(args)));\n      };\n\n      this.searchForFacetValues = function () {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        _this3.context.ais.onSearchForFacetValues(connectorDesc.searchForFacetValues.apply(connectorDesc, [_this3.props, _this3.context.ais.store.getState().widgets].concat(args)));\n      };\n\n      this.createURL = function () {\n        var _connectorDesc$refine2;\n\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        return _this3.context.ais.createHrefForState((_connectorDesc$refine2 = connectorDesc.refine).call.apply(_connectorDesc$refine2, [_this3, _this3.props, _this3.context.ais.store.getState().widgets].concat(args)));\n      };\n\n      this.cleanUp = function () {\n        var _connectorDesc$cleanU;\n\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        return (_connectorDesc$cleanU = connectorDesc.cleanUp).call.apply(_connectorDesc$cleanU, [_this3].concat(args));\n      };\n    }, _temp;\n  };\n}","map":{"version":3,"sources":["D:/TT18-EC-Team1-FE/isomorphic/node_modules/react-instantsearch/src/core/createConnector.js"],"names":["Object","defineProperty","exports","value","_isEqual2","require","_isEqual3","_interopRequireDefault","_has2","_has3","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","default","createConnector","_propTypes","_propTypes2","_react","_react2","_utils","obj","__esModule","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","connectorDesc","displayName","Error","hasRefine","hasSearchForFacetValues","hasSearchParameters","hasMetadata","hasTransitionState","hasCleanUp","isWidget","Composed","_class","_temp","_initialiseProps","_Component","Connector","context","_this","getPrototypeOf","_context$ais","ais","store","widgetsManager","canRender","state","getProvidedProps","unsubscribe","subscribe","setState","unregisterWidget","registerWidget","process","env","NODE_ENV","onlyGetProvidedPropsUsage","keys","find","indexOf","substr","console","warn","getMetadata","nextWidgetsState","getSearchParameters","searchParameters","getState","widgets","transitionState","prevWidgetsState","componentDidMount","componentWillMount","onSearchParameters","componentWillReceiveProps","nextProps","update","onSearchStateChange","componentWillUnmount","newState","cleanUp","removeEmptyKey","shouldComponentUpdate","nextState","propsEqual","shallowEqual","render","_this2","refineProps","refine","createURL","searchForFacetValuesProps","searchForItems","searchForFacetValues","apply","createElement","Component","getDisplayName","defaultClassNames","propTypes","defaultProps","contextTypes","object","isRequired","multiIndexContext","_this3","_store$getState","results","searching","error","metadata","resultsFacetValues","searchingForFacetValues","isSearchStalled","searchResults","_connectorDesc$refine","_len","args","Array","_key","onInternalStateUpdate","concat","_len2","_key2","onSearchForFacetValues","_connectorDesc$refine2","_len3","_key3","createHrefForState","_connectorDesc$cleanU","_len4","_key4"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isEqual2 = require('lodash/isEqual');\n\nvar _isEqual3 = _interopRequireDefault(_isEqual2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = createConnector;\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @typedef {object} ConnectorDescription\n * @property {string} displayName - the displayName used by the wrapper\n * @property {function} refine - a function to filter the local state\n * @property {function} getSearchParameters - function transforming the local state to a SearchParameters\n * @property {function} getMetadata - metadata of the widget\n * @property {function} transitionState - hook after the state has changed\n * @property {function} getProvidedProps - transform the state into props passed to the wrapped component.\n * Receives (props, widgetStates, searchState, metadata) and returns the local state.\n * @property {function} getId - Receives props and return the id that will be used to identify the widget\n * @property {function} cleanUp - hook when the widget will unmount. Receives (props, searchState) and return a cleaned state.\n * @property {object} propTypes - PropTypes forwarded to the wrapped component.\n * @property {object} defaultProps - default values for the props\n */\n\n/**\n * Connectors are the HOC used to transform React components\n * into InstantSearch widgets.\n * In order to simplify the construction of such connectors\n * `createConnector` takes a description and transform it into\n * a connector.\n * @param {ConnectorDescription} connectorDesc the description of the connector\n * @return {Connector} a function that wraps a component into\n * an instantsearch connected one.\n */\nfunction createConnector(connectorDesc) {\n  if (!connectorDesc.displayName) {\n    throw new Error('`createConnector` requires you to provide a `displayName` property.');\n  }\n\n  var hasRefine = (0, _has3.default)(connectorDesc, 'refine');\n  var hasSearchForFacetValues = (0, _has3.default)(connectorDesc, 'searchForFacetValues');\n  var hasSearchParameters = (0, _has3.default)(connectorDesc, 'getSearchParameters');\n  var hasMetadata = (0, _has3.default)(connectorDesc, 'getMetadata');\n  var hasTransitionState = (0, _has3.default)(connectorDesc, 'transitionState');\n  var hasCleanUp = (0, _has3.default)(connectorDesc, 'cleanUp');\n  var isWidget = hasSearchParameters || hasMetadata || hasTransitionState;\n\n  return function (Composed) {\n    var _class, _temp, _initialiseProps;\n\n    return _temp = _class = function (_Component) {\n      _inherits(Connector, _Component);\n\n      function Connector(props, context) {\n        _classCallCheck(this, Connector);\n\n        var _this = _possibleConstructorReturn(this, (Connector.__proto__ || Object.getPrototypeOf(Connector)).call(this, props, context));\n\n        _initialiseProps.call(_this);\n\n        var _context$ais = context.ais,\n            store = _context$ais.store,\n            widgetsManager = _context$ais.widgetsManager;\n\n        var canRender = false;\n        _this.state = {\n          props: _this.getProvidedProps(_extends({}, props, { canRender: canRender })),\n          canRender: canRender // use to know if a component is rendered (browser), or not (server).\n        };\n\n        _this.unsubscribe = store.subscribe(function () {\n          if (_this.state.canRender) {\n            _this.setState({\n              props: _this.getProvidedProps(_extends({}, _this.props, {\n                canRender: _this.state.canRender\n              }))\n            });\n          }\n        });\n        if (isWidget) {\n          _this.unregisterWidget = widgetsManager.registerWidget(_this);\n        }\n        if (process.env.NODE_ENV === 'development') {\n          var onlyGetProvidedPropsUsage = !Object.keys(connectorDesc).find(function (key) {\n            return ['getMetadata', 'getSearchParameters', 'refine', 'cleanUp'].indexOf(key) > -1;\n          });\n\n          if (onlyGetProvidedPropsUsage && connectorDesc.displayName.substr(0, 7) !== 'Algolia') {\n            // eslint-disable-next-line no-console\n            console.warn('react-instantsearch: it seems that you are using the `createConnector` api ' + 'only to access the `searchState` and the `searchResults` through `getProvidedProps`.' + 'We are now provided a dedicated API' + ' the `connectStateResults` connector that you should use instead. The `createConnector` API will be ' + 'soon deprecated and will break in future next major versions.' + '\\n\\n' + 'See more at https://community.algolia.com/react-instantsearch/connectors/connectStateResults.html' + '\\n' + 'and https://community.algolia.com/react-instantsearch/guide/Conditional_display.html');\n          }\n        }\n        return _this;\n      }\n\n      _createClass(Connector, [{\n        key: 'getMetadata',\n        value: function getMetadata(nextWidgetsState) {\n          if (hasMetadata) {\n            return connectorDesc.getMetadata.call(this, this.props, nextWidgetsState);\n          }\n          return {};\n        }\n      }, {\n        key: 'getSearchParameters',\n        value: function getSearchParameters(searchParameters) {\n          if (hasSearchParameters) {\n            return connectorDesc.getSearchParameters.call(this, searchParameters, this.props, this.context.ais.store.getState().widgets);\n          }\n          return null;\n        }\n      }, {\n        key: 'transitionState',\n        value: function transitionState(prevWidgetsState, nextWidgetsState) {\n          if (hasTransitionState) {\n            return connectorDesc.transitionState.call(this, this.props, prevWidgetsState, nextWidgetsState);\n          }\n          return nextWidgetsState;\n        }\n      }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n          this.setState({\n            canRender: true\n          });\n        }\n      }, {\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n          if (connectorDesc.getSearchParameters) {\n            this.context.ais.onSearchParameters(connectorDesc.getSearchParameters, this.context, this.props);\n          }\n        }\n      }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n          if (!(0, _isEqual3.default)(this.props, nextProps)) {\n            this.setState({\n              props: this.getProvidedProps(nextProps)\n            });\n\n            if (isWidget) {\n              // Since props might have changed, we need to re-run getSearchParameters\n              // and getMetadata with the new props.\n              this.context.ais.widgetsManager.update();\n              if (connectorDesc.transitionState) {\n                this.context.ais.onSearchStateChange(connectorDesc.transitionState.call(this, nextProps, this.context.ais.store.getState().widgets, this.context.ais.store.getState().widgets));\n              }\n            }\n          }\n        }\n      }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n          this.unsubscribe();\n          if (isWidget) {\n            this.unregisterWidget(); // will schedule an update\n            if (hasCleanUp) {\n              var newState = connectorDesc.cleanUp.call(this, this.props, this.context.ais.store.getState().widgets);\n              this.context.ais.store.setState(_extends({}, this.context.ais.store.getState(), {\n                widgets: newState\n              }));\n              this.context.ais.onSearchStateChange((0, _utils.removeEmptyKey)(newState));\n            }\n          }\n        }\n      }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          var propsEqual = (0, _utils.shallowEqual)(this.props, nextProps);\n          if (this.state.props === null || nextState.props === null) {\n            if (this.state.props === nextState.props) {\n              return !propsEqual;\n            }\n            return true;\n          }\n          return !propsEqual || !(0, _utils.shallowEqual)(this.state.props, nextState.props);\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          var _this2 = this;\n\n          if (this.state.props === null) {\n            return null;\n          }\n\n          var refineProps = hasRefine ? { refine: this.refine, createURL: this.createURL } : {};\n          var searchForFacetValuesProps = hasSearchForFacetValues ? {\n            searchForItems: this.searchForFacetValues,\n            searchForFacetValues: function searchForFacetValues() {\n              if (process.env.NODE_ENV === 'development') {\n                // eslint-disable-next-line no-console\n                console.warn('react-instantsearch: `searchForFacetValues` has been renamed to' + '`searchForItems`, this will break in the next major version.');\n              }\n              _this2.searchForFacetValues.apply(_this2, arguments);\n            }\n          } : {};\n\n          return _react2.default.createElement(Composed, _extends({}, this.props, this.state.props, refineProps, searchForFacetValuesProps));\n        }\n      }]);\n\n      return Connector;\n    }(_react.Component), _class.displayName = connectorDesc.displayName + '(' + (0, _utils.getDisplayName)(Composed) + ')', _class.defaultClassNames = Composed.defaultClassNames, _class.propTypes = connectorDesc.propTypes, _class.defaultProps = connectorDesc.defaultProps, _class.contextTypes = {\n      // @TODO: more precise state manager propType\n      ais: _propTypes2.default.object.isRequired,\n      multiIndexContext: _propTypes2.default.object\n    }, _initialiseProps = function _initialiseProps() {\n      var _this3 = this;\n\n      this.getProvidedProps = function (props) {\n        var store = _this3.context.ais.store;\n\n        var _store$getState = store.getState(),\n            results = _store$getState.results,\n            searching = _store$getState.searching,\n            error = _store$getState.error,\n            widgets = _store$getState.widgets,\n            metadata = _store$getState.metadata,\n            resultsFacetValues = _store$getState.resultsFacetValues,\n            searchingForFacetValues = _store$getState.searchingForFacetValues,\n            isSearchStalled = _store$getState.isSearchStalled;\n\n        var searchResults = {\n          results: results,\n          searching: searching,\n          error: error,\n          searchingForFacetValues: searchingForFacetValues,\n          isSearchStalled: isSearchStalled\n        };\n        return connectorDesc.getProvidedProps.call(_this3, props, widgets, searchResults, metadata, resultsFacetValues);\n      };\n\n      this.refine = function () {\n        var _connectorDesc$refine;\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this3.context.ais.onInternalStateUpdate((_connectorDesc$refine = connectorDesc.refine).call.apply(_connectorDesc$refine, [_this3, _this3.props, _this3.context.ais.store.getState().widgets].concat(args)));\n      };\n\n      this.searchForFacetValues = function () {\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        _this3.context.ais.onSearchForFacetValues(connectorDesc.searchForFacetValues.apply(connectorDesc, [_this3.props, _this3.context.ais.store.getState().widgets].concat(args)));\n      };\n\n      this.createURL = function () {\n        var _connectorDesc$refine2;\n\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        return _this3.context.ais.createHrefForState((_connectorDesc$refine2 = connectorDesc.refine).call.apply(_connectorDesc$refine2, [_this3, _this3.props, _this3.context.ais.store.getState().widgets].concat(args)));\n      };\n\n      this.cleanUp = function () {\n        var _connectorDesc$cleanU;\n\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        return (_connectorDesc$cleanU = connectorDesc.cleanUp).call.apply(_connectorDesc$cleanU, [_this3].concat(args));\n      };\n    }, _temp;\n  };\n}"]},"metadata":{},"sourceType":"script"}