{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar _require = require('preact'),\n    h = _require.h,\n    Component = _require.Component;\n\nvar classNames = require('classnames');\n\nvar getFileTypeIcon = require('../../utils/getFileTypeIcon');\n\nvar ignoreEvent = require('../../utils/ignoreEvent.js');\n\nvar FilePreview = require('../FilePreview');\n\nvar FileCard = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(FileCard, _Component);\n\n  function FileCard(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.saveOnEnter = function (ev) {\n      if (ev.keyCode === 13) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        var file = _this.props.files[_this.props.fileCardFor];\n\n        _this.props.saveFileCard(_this.state.formState, file.id);\n      }\n    };\n\n    _this.updateMeta = function (newVal, name) {\n      var _extends2;\n\n      _this.setState({\n        formState: _extends({}, _this.state.formState, (_extends2 = {}, _extends2[name] = newVal, _extends2))\n      });\n    };\n\n    _this.handleSave = function () {\n      var fileID = _this.props.fileCardFor;\n\n      _this.props.saveFileCard(_this.state.formState, fileID);\n    };\n\n    _this.handleCancel = function () {\n      _this.props.toggleFileCard(false);\n    };\n\n    _this.renderMetaFields = function () {\n      var metaFields = _this.getMetaFields() || [];\n      var fieldCSSClasses = {\n        text: 'uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input'\n      };\n      return metaFields.map(function (field) {\n        var id = \"uppy-Dashboard-FileCard-input-\" + field.id;\n        return h(\"fieldset\", {\n          key: field.id,\n          className: \"uppy-Dashboard-FileCard-fieldset\"\n        }, h(\"label\", {\n          className: \"uppy-Dashboard-FileCard-label\",\n          htmlFor: id\n        }, field.name), field.render !== undefined ? field.render({\n          value: _this.state.formState[field.id],\n          onChange: function onChange(newVal) {\n            return _this.updateMeta(newVal, field.id);\n          },\n          fieldCSSClasses: fieldCSSClasses\n        }, h) : h(\"input\", {\n          className: fieldCSSClasses.text,\n          id: id,\n          type: field.type || 'text',\n          value: _this.state.formState[field.id],\n          placeholder: field.placeholder,\n          onKeyUp: _this.saveOnEnter,\n          onKeyDown: _this.saveOnEnter,\n          onKeyPress: _this.saveOnEnter,\n          onInput: function onInput(ev) {\n            return _this.updateMeta(ev.target.value, field.id);\n          },\n          \"data-uppy-super-focusable\": true\n        }));\n      });\n    };\n\n    var _file = _this.props.files[_this.props.fileCardFor];\n\n    var _metaFields = _this.getMetaFields() || [];\n\n    var storedMetaData = {};\n\n    _metaFields.forEach(function (field) {\n      storedMetaData[field.id] = _file.meta[field.id] || '';\n    });\n\n    _this.state = {\n      formState: storedMetaData\n    };\n    return _this;\n  }\n\n  var _proto = FileCard.prototype;\n\n  _proto.getMetaFields = function getMetaFields() {\n    return typeof this.props.metaFields === 'function' ? this.props.metaFields(this.props.files[this.props.fileCardFor]) : this.props.metaFields;\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var file = this.props.files[this.props.fileCardFor];\n    var showEditButton = this.props.canEditFile(file);\n    return h(\"div\", {\n      className: classNames('uppy-Dashboard-FileCard', this.props.className),\n      \"data-uppy-panelType\": \"FileCard\",\n      onDragOver: ignoreEvent,\n      onDragLeave: ignoreEvent,\n      onDrop: ignoreEvent,\n      onPaste: ignoreEvent\n    }, h(\"div\", {\n      className: \"uppy-DashboardContent-bar\"\n    }, h(\"div\", {\n      className: \"uppy-DashboardContent-title\",\n      role: \"heading\",\n      \"aria-level\": \"1\"\n    }, this.props.i18nArray('editing', {\n      file: h(\"span\", {\n        className: \"uppy-DashboardContent-titleFile\"\n      }, file.meta ? file.meta.name : file.name)\n    })), h(\"button\", {\n      className: \"uppy-DashboardContent-back\",\n      type: \"button\",\n      title: this.props.i18n('finishEditingFile'),\n      onClick: this.handleSave\n    }, this.props.i18n('done'))), h(\"div\", {\n      className: \"uppy-Dashboard-FileCard-inner\"\n    }, h(\"div\", {\n      className: \"uppy-Dashboard-FileCard-preview\",\n      style: {\n        backgroundColor: getFileTypeIcon(file.type).color\n      }\n    }, h(FilePreview, {\n      file: file\n    }), showEditButton && h(\"button\", {\n      type: \"button\",\n      className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit\",\n      onClick: function onClick() {\n        return _this2.props.openFileEditor(file);\n      }\n    }, this.props.i18n('editFile'))), h(\"div\", {\n      className: \"uppy-Dashboard-FileCard-info\"\n    }, this.renderMetaFields()), h(\"div\", {\n      className: \"uppy-Dashboard-FileCard-actions\"\n    }, h(\"button\", {\n      className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn\",\n      type: \"button\",\n      onClick: this.handleSave\n    }, this.props.i18n('saveChanges')), h(\"button\", {\n      className: \"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn\",\n      type: \"button\",\n      onClick: this.handleCancel\n    }, this.props.i18n('cancel')))));\n  };\n\n  return FileCard;\n}(Component);\n\nmodule.exports = FileCard;","map":{"version":3,"sources":["D:/Team6-FE/isomorphic/node_modules/@uppy/dashboard/lib/components/FileCard/index.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_require","require","h","Component","classNames","getFileTypeIcon","ignoreEvent","FilePreview","FileCard","_Component","props","_this","saveOnEnter","ev","keyCode","stopPropagation","preventDefault","file","files","fileCardFor","saveFileCard","state","formState","id","updateMeta","newVal","name","_extends2","setState","handleSave","fileID","handleCancel","toggleFileCard","renderMetaFields","metaFields","getMetaFields","fieldCSSClasses","text","map","field","className","htmlFor","render","undefined","value","onChange","type","placeholder","onKeyUp","onKeyDown","onKeyPress","onInput","_file","_metaFields","storedMetaData","forEach","meta","_proto","_this2","showEditButton","canEditFile","onDragOver","onDragLeave","onDrop","onPaste","role","i18nArray","title","i18n","onClick","style","backgroundColor","color","openFileEditor","module","exports"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar _require = require('preact'),\n    h = _require.h,\n    Component = _require.Component;\n\nvar classNames = require('classnames');\n\nvar getFileTypeIcon = require('../../utils/getFileTypeIcon');\n\nvar ignoreEvent = require('../../utils/ignoreEvent.js');\n\nvar FilePreview = require('../FilePreview');\n\nvar FileCard = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(FileCard, _Component);\n\n  function FileCard(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.saveOnEnter = function (ev) {\n      if (ev.keyCode === 13) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        var file = _this.props.files[_this.props.fileCardFor];\n\n        _this.props.saveFileCard(_this.state.formState, file.id);\n      }\n    };\n\n    _this.updateMeta = function (newVal, name) {\n      var _extends2;\n\n      _this.setState({\n        formState: _extends({}, _this.state.formState, (_extends2 = {}, _extends2[name] = newVal, _extends2))\n      });\n    };\n\n    _this.handleSave = function () {\n      var fileID = _this.props.fileCardFor;\n\n      _this.props.saveFileCard(_this.state.formState, fileID);\n    };\n\n    _this.handleCancel = function () {\n      _this.props.toggleFileCard(false);\n    };\n\n    _this.renderMetaFields = function () {\n      var metaFields = _this.getMetaFields() || [];\n      var fieldCSSClasses = {\n        text: 'uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input'\n      };\n      return metaFields.map(function (field) {\n        var id = \"uppy-Dashboard-FileCard-input-\" + field.id;\n        return h(\"fieldset\", {\n          key: field.id,\n          className: \"uppy-Dashboard-FileCard-fieldset\"\n        }, h(\"label\", {\n          className: \"uppy-Dashboard-FileCard-label\",\n          htmlFor: id\n        }, field.name), field.render !== undefined ? field.render({\n          value: _this.state.formState[field.id],\n          onChange: function onChange(newVal) {\n            return _this.updateMeta(newVal, field.id);\n          },\n          fieldCSSClasses: fieldCSSClasses\n        }, h) : h(\"input\", {\n          className: fieldCSSClasses.text,\n          id: id,\n          type: field.type || 'text',\n          value: _this.state.formState[field.id],\n          placeholder: field.placeholder,\n          onKeyUp: _this.saveOnEnter,\n          onKeyDown: _this.saveOnEnter,\n          onKeyPress: _this.saveOnEnter,\n          onInput: function onInput(ev) {\n            return _this.updateMeta(ev.target.value, field.id);\n          },\n          \"data-uppy-super-focusable\": true\n        }));\n      });\n    };\n\n    var _file = _this.props.files[_this.props.fileCardFor];\n\n    var _metaFields = _this.getMetaFields() || [];\n\n    var storedMetaData = {};\n\n    _metaFields.forEach(function (field) {\n      storedMetaData[field.id] = _file.meta[field.id] || '';\n    });\n\n    _this.state = {\n      formState: storedMetaData\n    };\n    return _this;\n  }\n\n  var _proto = FileCard.prototype;\n\n  _proto.getMetaFields = function getMetaFields() {\n    return typeof this.props.metaFields === 'function' ? this.props.metaFields(this.props.files[this.props.fileCardFor]) : this.props.metaFields;\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var file = this.props.files[this.props.fileCardFor];\n    var showEditButton = this.props.canEditFile(file);\n    return h(\"div\", {\n      className: classNames('uppy-Dashboard-FileCard', this.props.className),\n      \"data-uppy-panelType\": \"FileCard\",\n      onDragOver: ignoreEvent,\n      onDragLeave: ignoreEvent,\n      onDrop: ignoreEvent,\n      onPaste: ignoreEvent\n    }, h(\"div\", {\n      className: \"uppy-DashboardContent-bar\"\n    }, h(\"div\", {\n      className: \"uppy-DashboardContent-title\",\n      role: \"heading\",\n      \"aria-level\": \"1\"\n    }, this.props.i18nArray('editing', {\n      file: h(\"span\", {\n        className: \"uppy-DashboardContent-titleFile\"\n      }, file.meta ? file.meta.name : file.name)\n    })), h(\"button\", {\n      className: \"uppy-DashboardContent-back\",\n      type: \"button\",\n      title: this.props.i18n('finishEditingFile'),\n      onClick: this.handleSave\n    }, this.props.i18n('done'))), h(\"div\", {\n      className: \"uppy-Dashboard-FileCard-inner\"\n    }, h(\"div\", {\n      className: \"uppy-Dashboard-FileCard-preview\",\n      style: {\n        backgroundColor: getFileTypeIcon(file.type).color\n      }\n    }, h(FilePreview, {\n      file: file\n    }), showEditButton && h(\"button\", {\n      type: \"button\",\n      className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit\",\n      onClick: function onClick() {\n        return _this2.props.openFileEditor(file);\n      }\n    }, this.props.i18n('editFile'))), h(\"div\", {\n      className: \"uppy-Dashboard-FileCard-info\"\n    }, this.renderMetaFields()), h(\"div\", {\n      className: \"uppy-Dashboard-FileCard-actions\"\n    }, h(\"button\", {\n      className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn\",\n      type: \"button\",\n      onClick: this.handleSave\n    }, this.props.i18n('saveChanges')), h(\"button\", {\n      className: \"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn\",\n      type: \"button\",\n      onClick: this.handleCancel\n    }, this.props.i18n('cancel')))));\n  };\n\n  return FileCard;\n}(Component);\n\nmodule.exports = FileCard;"]},"metadata":{},"sourceType":"script"}