{"ast":null,"code":"var _jsxFileName = \"D:\\\\Team6-FE\\\\isomorphic\\\\packages\\\\isomorphic\\\\src\\\\containers\\\\Topbar\\\\TopbarAddToCart.js\";\nimport React from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport IntlMessages from '@iso/components/utility/intlMessages';\nimport Scrollbar from '@iso/components/utility/customScrollBar';\nimport Popover from '@iso/components/uielements/popover';\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\nconst {\n  initData,\n  changeViewTopbarCart,\n  changeProductQuantity\n} = ecommerceAction;\nlet totalPrice;\nexport default function TopbarAddtoCart() {\n  let {\n    url\n  } = useRouteMatch();\n  const dispatch = useDispatch();\n  const customizedTheme = useSelector(state => state.ThemeSwitcher.topbarTheme);\n  const {\n    productQuantity,\n    products,\n    loadingInitData,\n    viewTopbarCart\n  } = useSelector(state => state.Ecommerce);\n\n  function hide() {\n    dispatch(changeViewTopbarCart(false));\n  }\n\n  function handleVisibleChange() {\n    dispatch(changeViewTopbarCart(!viewTopbarCart));\n  }\n\n  React.useEffect(() => {\n    if (!loadingInitData) {\n      dispatch(initData());\n    }\n  }, [dispatch, loadingInitData]);\n\n  function renderProducts() {\n    totalPrice = 0;\n\n    if (!productQuantity || productQuantity.length === 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"isoNoItemMsg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }\n      }, \"No item found\"));\n    }\n\n    return productQuantity.map(product => {\n      totalPrice += product.quantity * products[product.objectID].price;\n      return /*#__PURE__*/React.createElement(SingleCart, Object.assign({\n        key: product.objectID,\n        quantity: product.quantity,\n        changeQuantity: changeQuantity,\n        cancelQuantity: cancelQuantity\n      }, products[product.objectID], {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }\n      }));\n    });\n  }\n\n  function changeQuantity(objectID, quantity) {\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      } else {\n        newProductQuantity.push({\n          objectID,\n          quantity\n        });\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n\n  function cancelQuantity(objectID) {\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      }\n    });\n    dispatch(changeProductQuantity(newProductQuantity));\n  }\n\n  const content = /*#__PURE__*/React.createElement(TopbarDropdownWrapper, {\n    className: \"topbarAddtoCart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoDropdownHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"sidebar.cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoDropdownBody isoCartItemsWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Scrollbar, {\n    style: {\n      height: 300\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, renderProducts())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoDropdownFooterLinks\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `${url}/cart`,\n    onClick: hide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"topbar.viewCart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"topbar.totalPrice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }), \":\", ' ', /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, \"$\", totalPrice.toFixed(2)))));\n  return /*#__PURE__*/React.createElement(Popover, {\n    content: content,\n    trigger: \"click\",\n    visible: viewTopbarCart,\n    onVisibleChange: handleVisibleChange,\n    placement: \"bottomLeft\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoIconWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ion-android-cart\",\n    style: {\n      color: customizedTheme.textColor\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }), productQuantity.length === 0 ? '' : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, productQuantity.length)));\n}","map":{"version":3,"sources":["D:/Team6-FE/isomorphic/packages/isomorphic/src/containers/Topbar/TopbarAddToCart.js"],"names":["React","Link","useRouteMatch","useDispatch","useSelector","IntlMessages","Scrollbar","Popover","SingleCart","ecommerceAction","TopbarDropdownWrapper","initData","changeViewTopbarCart","changeProductQuantity","totalPrice","TopbarAddtoCart","url","dispatch","customizedTheme","state","ThemeSwitcher","topbarTheme","productQuantity","products","loadingInitData","viewTopbarCart","Ecommerce","hide","handleVisibleChange","useEffect","renderProducts","length","map","product","quantity","objectID","price","changeQuantity","cancelQuantity","newProductQuantity","forEach","push","content","height","toFixed","color","textColor"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Link, useRouteMatch } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport IntlMessages from '@iso/components/utility/intlMessages';\r\nimport Scrollbar from '@iso/components/utility/customScrollBar';\r\nimport Popover from '@iso/components/uielements/popover';\r\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\r\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\r\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\r\n\r\nconst {\r\n  initData,\r\n  changeViewTopbarCart,\r\n  changeProductQuantity,\r\n} = ecommerceAction;\r\nlet totalPrice;\r\nexport default function TopbarAddtoCart() {\r\n  let { url } = useRouteMatch();\r\n  const dispatch = useDispatch();\r\n  const customizedTheme = useSelector(state => state.ThemeSwitcher.topbarTheme);\r\n  const {\r\n    productQuantity,\r\n    products,\r\n    loadingInitData,\r\n    viewTopbarCart,\r\n  } = useSelector(state => state.Ecommerce);\r\n\r\n  function hide() {\r\n    dispatch(changeViewTopbarCart(false));\r\n  }\r\n  function handleVisibleChange() {\r\n    dispatch(changeViewTopbarCart(!viewTopbarCart));\r\n  }\r\n  React.useEffect(() => {\r\n    if (!loadingInitData) {\r\n      dispatch(initData());\r\n    }\r\n  }, [dispatch, loadingInitData]);\r\n\r\n  function renderProducts() {\r\n    totalPrice = 0;\r\n    if (!productQuantity || productQuantity.length === 0) {\r\n      return (\r\n        <div className=\"isoNoItemMsg\">\r\n          <span>No item found</span>\r\n        </div>\r\n      );\r\n    }\r\n    return productQuantity.map(product => {\r\n      totalPrice += product.quantity * products[product.objectID].price;\r\n      return (\r\n        <SingleCart\r\n          key={product.objectID}\r\n          quantity={product.quantity}\r\n          changeQuantity={changeQuantity}\r\n          cancelQuantity={cancelQuantity}\r\n          {...products[product.objectID]}\r\n        />\r\n      );\r\n    });\r\n  }\r\n  function changeQuantity(objectID, quantity) {\r\n    const newProductQuantity = [];\r\n    productQuantity.forEach(product => {\r\n      if (product.objectID !== objectID) {\r\n        newProductQuantity.push(product);\r\n      } else {\r\n        newProductQuantity.push({\r\n          objectID,\r\n          quantity,\r\n        });\r\n      }\r\n    });\r\n    dispatch(changeProductQuantity(newProductQuantity));\r\n  }\r\n  function cancelQuantity(objectID) {\r\n    const newProductQuantity = [];\r\n    productQuantity.forEach(product => {\r\n      if (product.objectID !== objectID) {\r\n        newProductQuantity.push(product);\r\n      }\r\n    });\r\n    dispatch(changeProductQuantity(newProductQuantity));\r\n  }\r\n\r\n  const content = (\r\n    <TopbarDropdownWrapper className=\"topbarAddtoCart\">\r\n      <div className=\"isoDropdownHeader\">\r\n        <h3>\r\n          <IntlMessages id=\"sidebar.cart\" />\r\n        </h3>\r\n      </div>\r\n      <div className=\"isoDropdownBody isoCartItemsWrapper\">\r\n        <Scrollbar style={{ height: 300 }}>{renderProducts()}</Scrollbar>\r\n      </div>\r\n      <div className=\"isoDropdownFooterLinks\">\r\n        <Link to={`${url}/cart`} onClick={hide}>\r\n          <IntlMessages id=\"topbar.viewCart\" />\r\n        </Link>\r\n\r\n        <h3>\r\n          <IntlMessages id=\"topbar.totalPrice\" />:{' '}\r\n          <span>${totalPrice.toFixed(2)}</span>\r\n        </h3>\r\n      </div>\r\n    </TopbarDropdownWrapper>\r\n  );\r\n  return (\r\n    <Popover\r\n      content={content}\r\n      trigger=\"click\"\r\n      visible={viewTopbarCart}\r\n      onVisibleChange={handleVisibleChange}\r\n      placement=\"bottomLeft\"\r\n    >\r\n      <div className=\"isoIconWrapper\">\r\n        <i\r\n          className=\"ion-android-cart\"\r\n          style={{ color: customizedTheme.textColor }}\r\n        />\r\n        {productQuantity.length === 0 ? (\r\n          ''\r\n        ) : (\r\n          <span>{productQuantity.length}</span>\r\n        )}\r\n      </div>\r\n    </Popover>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}