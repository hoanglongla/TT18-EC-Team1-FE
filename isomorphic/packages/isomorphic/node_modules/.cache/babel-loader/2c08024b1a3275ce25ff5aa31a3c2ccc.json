{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _omit2 = require('lodash/omit');\n\nvar _omit3 = _interopRequireDefault(_omit2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.getIndex = getIndex;\nexports.getResults = getResults;\nexports.hasMultipleIndex = hasMultipleIndex;\nexports.refineValue = refineValue;\nexports.getCurrentRefinementValue = getCurrentRefinementValue;\nexports.cleanUpValue = cleanUpValue;\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction getIndex(context) {\n  return context && context.multiIndexContext ? context.multiIndexContext.targetedIndex : context.ais.mainTargetedIndex;\n}\n\nfunction getResults(searchResults, context) {\n  if (searchResults.results && !searchResults.results.hits) {\n    return searchResults.results[getIndex(context)] ? searchResults.results[getIndex(context)] : null;\n  } else {\n    return searchResults.results ? searchResults.results : null;\n  }\n}\n\nfunction hasMultipleIndex(context) {\n  return context && context.multiIndexContext;\n} // eslint-disable-next-line max-params\n\n\nfunction refineValue(searchState, nextRefinement, context, resetPage, namespace) {\n  if (hasMultipleIndex(context)) {\n    return namespace ? refineMultiIndexWithNamespace(searchState, nextRefinement, context, resetPage, namespace) : refineMultiIndex(searchState, nextRefinement, context, resetPage);\n  } else {\n    // When we have a multi index page with shared widgets we should also\n    // reset their page to 1 if the resetPage is provided. Otherwise the\n    // indices will always be reset\n    // see: https://github.com/algolia/react-instantsearch/issues/310\n    // see: https://github.com/algolia/react-instantsearch/issues/637\n    if (searchState.indices && resetPage) {\n      Object.keys(searchState.indices).forEach(function (targetedIndex) {\n        searchState = refineValue(searchState, {\n          page: 1\n        }, {\n          multiIndexContext: {\n            targetedIndex: targetedIndex\n          }\n        }, true, namespace);\n      });\n    }\n\n    return namespace ? refineSingleIndexWithNamespace(searchState, nextRefinement, resetPage, namespace) : refineSingleIndex(searchState, nextRefinement, resetPage);\n  }\n}\n\nfunction refineMultiIndex(searchState, nextRefinement, context, resetPage) {\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  var index = getIndex(context);\n  var state = (0, _has3.default)(searchState, 'indices.' + index) ? _extends({}, searchState.indices, _defineProperty({}, index, _extends({}, searchState.indices[index], nextRefinement, page))) : _extends({}, searchState.indices, _defineProperty({}, index, _extends({}, nextRefinement, page)));\n  return _extends({}, searchState, {\n    indices: state\n  });\n}\n\nfunction refineSingleIndex(searchState, nextRefinement, resetPage) {\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  return _extends({}, searchState, nextRefinement, page);\n} // eslint-disable-next-line max-params\n\n\nfunction refineMultiIndexWithNamespace(searchState, nextRefinement, context, resetPage, namespace) {\n  var _extends4;\n\n  var index = getIndex(context);\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  var state = (0, _has3.default)(searchState, 'indices.' + index) ? _extends({}, searchState.indices, _defineProperty({}, index, _extends({}, searchState.indices[index], (_extends4 = {}, _defineProperty(_extends4, namespace, _extends({}, searchState.indices[index][namespace], nextRefinement)), _defineProperty(_extends4, 'page', 1), _extends4)))) : _extends({}, searchState.indices, _defineProperty({}, index, _extends(_defineProperty({}, namespace, nextRefinement), page)));\n  return _extends({}, searchState, {\n    indices: state\n  });\n}\n\nfunction refineSingleIndexWithNamespace(searchState, nextRefinement, resetPage, namespace) {\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  return _extends({}, searchState, _defineProperty({}, namespace, _extends({}, searchState[namespace], nextRefinement)), page);\n}\n\nfunction getNamespaceAndAttributeName(id) {\n  var parts = id.match(/^([^.]*)\\.(.*)/);\n  var namespace = parts && parts[1];\n  var attributeName = parts && parts[2];\n  return {\n    namespace: namespace,\n    attributeName: attributeName\n  };\n} // eslint-disable-next-line max-params\n\n\nfunction getCurrentRefinementValue(props, searchState, context, id, defaultValue, refinementsCallback) {\n  var index = getIndex(context);\n\n  var _getNamespaceAndAttri = getNamespaceAndAttributeName(id),\n      namespace = _getNamespaceAndAttri.namespace,\n      attributeName = _getNamespaceAndAttri.attributeName;\n\n  var refinements = hasMultipleIndex(context) && searchState.indices && namespace && searchState.indices['' + index] && (0, _has3.default)(searchState.indices['' + index][namespace], '' + attributeName) || hasMultipleIndex(context) && searchState.indices && (0, _has3.default)(searchState, 'indices.' + index + '.' + id) || !hasMultipleIndex(context) && namespace && (0, _has3.default)(searchState[namespace], attributeName) || !hasMultipleIndex(context) && (0, _has3.default)(searchState, id);\n\n  if (refinements) {\n    var currentRefinement = void 0;\n\n    if (hasMultipleIndex(context)) {\n      currentRefinement = namespace ? (0, _get3.default)(searchState.indices['' + index][namespace], attributeName) : (0, _get3.default)(searchState.indices[index], id);\n    } else {\n      currentRefinement = namespace ? (0, _get3.default)(searchState[namespace], attributeName) : (0, _get3.default)(searchState, id);\n    }\n\n    return refinementsCallback(currentRefinement);\n  }\n\n  if (props.defaultRefinement) {\n    return props.defaultRefinement;\n  }\n\n  return defaultValue;\n}\n\nfunction cleanUpValue(searchState, context, id) {\n  var index = getIndex(context);\n\n  var _getNamespaceAndAttri2 = getNamespaceAndAttributeName(id),\n      namespace = _getNamespaceAndAttri2.namespace,\n      attributeName = _getNamespaceAndAttri2.attributeName;\n\n  if (hasMultipleIndex(context) && Boolean(searchState.indices)) {\n    return namespace ? _extends({}, searchState, {\n      indices: _extends({}, searchState.indices, _defineProperty({}, index, _extends({}, searchState.indices[index], _defineProperty({}, namespace, (0, _omit3.default)(searchState.indices[index][namespace], '' + attributeName)))))\n    }) : (0, _omit3.default)(searchState, 'indices.' + index + '.' + id);\n  } else {\n    return namespace ? _extends({}, searchState, _defineProperty({}, namespace, (0, _omit3.default)(searchState[namespace], '' + attributeName))) : (0, _omit3.default)(searchState, '' + id);\n  }\n}","map":{"version":3,"sources":["D:/Team6-FE/isomorphic/node_modules/react-instantsearch/src/core/indexUtils.js"],"names":["Object","defineProperty","exports","value","_get2","require","_get3","_interopRequireDefault","_omit2","_omit3","_has2","_has3","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","getIndex","getResults","hasMultipleIndex","refineValue","getCurrentRefinementValue","cleanUpValue","obj","__esModule","default","_defineProperty","enumerable","configurable","writable","context","multiIndexContext","targetedIndex","ais","mainTargetedIndex","searchResults","results","hits","searchState","nextRefinement","resetPage","namespace","refineMultiIndexWithNamespace","refineMultiIndex","indices","keys","forEach","page","refineSingleIndexWithNamespace","refineSingleIndex","undefined","index","state","_extends4","getNamespaceAndAttributeName","id","parts","match","attributeName","props","defaultValue","refinementsCallback","_getNamespaceAndAttri","refinements","currentRefinement","defaultRefinement","_getNamespaceAndAttri2","Boolean"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;;AAIA,IAAIC,KAAK,GAAGC,OAAO,CAAC,YAAD,CAAnB;;AAEA,IAAIC,KAAK,GAAGC,sBAAsB,CAACH,KAAD,CAAlC;;AAEA,IAAII,MAAM,GAAGH,OAAO,CAAC,aAAD,CAApB;;AAEA,IAAII,MAAM,GAAGF,sBAAsB,CAACC,MAAD,CAAnC;;AAEA,IAAIE,KAAK,GAAGL,OAAO,CAAC,YAAD,CAAnB;;AAEA,IAAIM,KAAK,GAAGJ,sBAAsB,CAACG,KAAD,CAAlC;;AAEA,IAAIE,QAAQ,GAAGZ,MAAM,CAACa,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIlB,MAAM,CAACoB,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAAhQ;;AAEAZ,OAAO,CAACqB,QAAR,GAAmBA,QAAnB;AACArB,OAAO,CAACsB,UAAR,GAAqBA,UAArB;AACAtB,OAAO,CAACuB,gBAAR,GAA2BA,gBAA3B;AACAvB,OAAO,CAACwB,WAAR,GAAsBA,WAAtB;AACAxB,OAAO,CAACyB,yBAAR,GAAoCA,yBAApC;AACAzB,OAAO,CAAC0B,YAAR,GAAuBA,YAAvB;;AAEA,SAASrB,sBAAT,CAAgCsB,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEE,IAAAA,OAAO,EAAEF;AAAX,GAArC;AAAwD;;AAE/F,SAASG,eAAT,CAAyBH,GAAzB,EAA8BV,GAA9B,EAAmChB,KAAnC,EAA0C;AAAE,MAAIgB,GAAG,IAAIU,GAAX,EAAgB;AAAE7B,IAAAA,MAAM,CAACC,cAAP,CAAsB4B,GAAtB,EAA2BV,GAA3B,EAAgC;AAAEhB,MAAAA,KAAK,EAAEA,KAAT;AAAgB8B,MAAAA,UAAU,EAAE,IAA5B;AAAkCC,MAAAA,YAAY,EAAE,IAAhD;AAAsDC,MAAAA,QAAQ,EAAE;AAAhE,KAAhC;AAA0G,GAA5H,MAAkI;AAAEN,IAAAA,GAAG,CAACV,GAAD,CAAH,GAAWhB,KAAX;AAAmB;;AAAC,SAAO0B,GAAP;AAAa;;AAEjN,SAASN,QAAT,CAAkBa,OAAlB,EAA2B;AACzB,SAAOA,OAAO,IAAIA,OAAO,CAACC,iBAAnB,GAAuCD,OAAO,CAACC,iBAAR,CAA0BC,aAAjE,GAAiFF,OAAO,CAACG,GAAR,CAAYC,iBAApG;AACD;;AAED,SAAShB,UAAT,CAAoBiB,aAApB,EAAmCL,OAAnC,EAA4C;AAC1C,MAAIK,aAAa,CAACC,OAAd,IAAyB,CAACD,aAAa,CAACC,OAAd,CAAsBC,IAApD,EAA0D;AACxD,WAAOF,aAAa,CAACC,OAAd,CAAsBnB,QAAQ,CAACa,OAAD,CAA9B,IAA2CK,aAAa,CAACC,OAAd,CAAsBnB,QAAQ,CAACa,OAAD,CAA9B,CAA3C,GAAsF,IAA7F;AACD,GAFD,MAEO;AACL,WAAOK,aAAa,CAACC,OAAd,GAAwBD,aAAa,CAACC,OAAtC,GAAgD,IAAvD;AACD;AACF;;AAED,SAASjB,gBAAT,CAA0BW,OAA1B,EAAmC;AACjC,SAAOA,OAAO,IAAIA,OAAO,CAACC,iBAA1B;AACD,C,CAED;;;AACA,SAASX,WAAT,CAAqBkB,WAArB,EAAkCC,cAAlC,EAAkDT,OAAlD,EAA2DU,SAA3D,EAAsEC,SAAtE,EAAiF;AAC/E,MAAItB,gBAAgB,CAACW,OAAD,CAApB,EAA+B;AAC7B,WAAOW,SAAS,GAAGC,6BAA6B,CAACJ,WAAD,EAAcC,cAAd,EAA8BT,OAA9B,EAAuCU,SAAvC,EAAkDC,SAAlD,CAAhC,GAA+FE,gBAAgB,CAACL,WAAD,EAAcC,cAAd,EAA8BT,OAA9B,EAAuCU,SAAvC,CAA/H;AACD,GAFD,MAEO;AACL;AACA;AACA;AACA;AACA;AACA,QAAIF,WAAW,CAACM,OAAZ,IAAuBJ,SAA3B,EAAsC;AACpC9C,MAAAA,MAAM,CAACmD,IAAP,CAAYP,WAAW,CAACM,OAAxB,EAAiCE,OAAjC,CAAyC,UAAUd,aAAV,EAAyB;AAChEM,QAAAA,WAAW,GAAGlB,WAAW,CAACkB,WAAD,EAAc;AAAES,UAAAA,IAAI,EAAE;AAAR,SAAd,EAA2B;AAAEhB,UAAAA,iBAAiB,EAAE;AAAEC,YAAAA,aAAa,EAAEA;AAAjB;AAArB,SAA3B,EAAoF,IAApF,EAA0FS,SAA1F,CAAzB;AACD,OAFD;AAGD;;AACD,WAAOA,SAAS,GAAGO,8BAA8B,CAACV,WAAD,EAAcC,cAAd,EAA8BC,SAA9B,EAAyCC,SAAzC,CAAjC,GAAuFQ,iBAAiB,CAACX,WAAD,EAAcC,cAAd,EAA8BC,SAA9B,CAAxH;AACD;AACF;;AAED,SAASG,gBAAT,CAA0BL,WAA1B,EAAuCC,cAAvC,EAAuDT,OAAvD,EAAgEU,SAAhE,EAA2E;AACzE,MAAIO,IAAI,GAAGP,SAAS,GAAG;AAAEO,IAAAA,IAAI,EAAE;AAAR,GAAH,GAAiBG,SAArC;AACA,MAAIC,KAAK,GAAGlC,QAAQ,CAACa,OAAD,CAApB;AACA,MAAIsB,KAAK,GAAG,CAAC,GAAG/C,KAAK,CAACoB,OAAV,EAAmBa,WAAnB,EAAgC,aAAaa,KAA7C,IAAsD7C,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACM,OAAjB,EAA0BlB,eAAe,CAAC,EAAD,EAAKyB,KAAL,EAAY7C,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACM,OAAZ,CAAoBO,KAApB,CAAL,EAAiCZ,cAAjC,EAAiDQ,IAAjD,CAApB,CAAzC,CAA9D,GAAsLzC,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACM,OAAjB,EAA0BlB,eAAe,CAAC,EAAD,EAAKyB,KAAL,EAAY7C,QAAQ,CAAC,EAAD,EAAKiC,cAAL,EAAqBQ,IAArB,CAApB,CAAzC,CAA1M;AACA,SAAOzC,QAAQ,CAAC,EAAD,EAAKgC,WAAL,EAAkB;AAAEM,IAAAA,OAAO,EAAEQ;AAAX,GAAlB,CAAf;AACD;;AAED,SAASH,iBAAT,CAA2BX,WAA3B,EAAwCC,cAAxC,EAAwDC,SAAxD,EAAmE;AACjE,MAAIO,IAAI,GAAGP,SAAS,GAAG;AAAEO,IAAAA,IAAI,EAAE;AAAR,GAAH,GAAiBG,SAArC;AACA,SAAO5C,QAAQ,CAAC,EAAD,EAAKgC,WAAL,EAAkBC,cAAlB,EAAkCQ,IAAlC,CAAf;AACD,C,CAED;;;AACA,SAASL,6BAAT,CAAuCJ,WAAvC,EAAoDC,cAApD,EAAoET,OAApE,EAA6EU,SAA7E,EAAwFC,SAAxF,EAAmG;AACjG,MAAIY,SAAJ;;AAEA,MAAIF,KAAK,GAAGlC,QAAQ,CAACa,OAAD,CAApB;AACA,MAAIiB,IAAI,GAAGP,SAAS,GAAG;AAAEO,IAAAA,IAAI,EAAE;AAAR,GAAH,GAAiBG,SAArC;AACA,MAAIE,KAAK,GAAG,CAAC,GAAG/C,KAAK,CAACoB,OAAV,EAAmBa,WAAnB,EAAgC,aAAaa,KAA7C,IAAsD7C,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACM,OAAjB,EAA0BlB,eAAe,CAAC,EAAD,EAAKyB,KAAL,EAAY7C,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACM,OAAZ,CAAoBO,KAApB,CAAL,GAAkCE,SAAS,GAAG,EAAZ,EAAgB3B,eAAe,CAAC2B,SAAD,EAAYZ,SAAZ,EAAuBnC,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACM,OAAZ,CAAoBO,KAApB,EAA2BV,SAA3B,CAAL,EAA4CF,cAA5C,CAA/B,CAA/B,EAA4Hb,eAAe,CAAC2B,SAAD,EAAY,MAAZ,EAAoB,CAApB,CAA3I,EAAmKA,SAArM,EAApB,CAAzC,CAA9D,GAAgV/C,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACM,OAAjB,EAA0BlB,eAAe,CAAC,EAAD,EAAKyB,KAAL,EAAY7C,QAAQ,CAACoB,eAAe,CAAC,EAAD,EAAKe,SAAL,EAAgBF,cAAhB,CAAhB,EAAiDQ,IAAjD,CAApB,CAAzC,CAApW;AACA,SAAOzC,QAAQ,CAAC,EAAD,EAAKgC,WAAL,EAAkB;AAAEM,IAAAA,OAAO,EAAEQ;AAAX,GAAlB,CAAf;AACD;;AAED,SAASJ,8BAAT,CAAwCV,WAAxC,EAAqDC,cAArD,EAAqEC,SAArE,EAAgFC,SAAhF,EAA2F;AACzF,MAAIM,IAAI,GAAGP,SAAS,GAAG;AAAEO,IAAAA,IAAI,EAAE;AAAR,GAAH,GAAiBG,SAArC;AACA,SAAO5C,QAAQ,CAAC,EAAD,EAAKgC,WAAL,EAAkBZ,eAAe,CAAC,EAAD,EAAKe,SAAL,EAAgBnC,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACG,SAAD,CAAhB,EAA6BF,cAA7B,CAAxB,CAAjC,EAAwGQ,IAAxG,CAAf;AACD;;AAED,SAASO,4BAAT,CAAsCC,EAAtC,EAA0C;AACxC,MAAIC,KAAK,GAAGD,EAAE,CAACE,KAAH,CAAS,gBAAT,CAAZ;AACA,MAAIhB,SAAS,GAAGe,KAAK,IAAIA,KAAK,CAAC,CAAD,CAA9B;AACA,MAAIE,aAAa,GAAGF,KAAK,IAAIA,KAAK,CAAC,CAAD,CAAlC;AAEA,SAAO;AAAEf,IAAAA,SAAS,EAAEA,SAAb;AAAwBiB,IAAAA,aAAa,EAAEA;AAAvC,GAAP;AACD,C,CAED;;;AACA,SAASrC,yBAAT,CAAmCsC,KAAnC,EAA0CrB,WAA1C,EAAuDR,OAAvD,EAAgEyB,EAAhE,EAAoEK,YAApE,EAAkFC,mBAAlF,EAAuG;AACrG,MAAIV,KAAK,GAAGlC,QAAQ,CAACa,OAAD,CAApB;;AAEA,MAAIgC,qBAAqB,GAAGR,4BAA4B,CAACC,EAAD,CAAxD;AAAA,MACId,SAAS,GAAGqB,qBAAqB,CAACrB,SADtC;AAAA,MAEIiB,aAAa,GAAGI,qBAAqB,CAACJ,aAF1C;;AAIA,MAAIK,WAAW,GAAG5C,gBAAgB,CAACW,OAAD,CAAhB,IAA6BQ,WAAW,CAACM,OAAzC,IAAoDH,SAApD,IAAiEH,WAAW,CAACM,OAAZ,CAAoB,KAAKO,KAAzB,CAAjE,IAAoG,CAAC,GAAG9C,KAAK,CAACoB,OAAV,EAAmBa,WAAW,CAACM,OAAZ,CAAoB,KAAKO,KAAzB,EAAgCV,SAAhC,CAAnB,EAA+D,KAAKiB,aAApE,CAApG,IAA0LvC,gBAAgB,CAACW,OAAD,CAAhB,IAA6BQ,WAAW,CAACM,OAAzC,IAAoD,CAAC,GAAGvC,KAAK,CAACoB,OAAV,EAAmBa,WAAnB,EAAgC,aAAaa,KAAb,GAAqB,GAArB,GAA2BI,EAA3D,CAA9O,IAAgT,CAACpC,gBAAgB,CAACW,OAAD,CAAjB,IAA8BW,SAA9B,IAA2C,CAAC,GAAGpC,KAAK,CAACoB,OAAV,EAAmBa,WAAW,CAACG,SAAD,CAA9B,EAA2CiB,aAA3C,CAA3V,IAAwZ,CAACvC,gBAAgB,CAACW,OAAD,CAAjB,IAA8B,CAAC,GAAGzB,KAAK,CAACoB,OAAV,EAAmBa,WAAnB,EAAgCiB,EAAhC,CAAxc;;AACA,MAAIQ,WAAJ,EAAiB;AACf,QAAIC,iBAAiB,GAAG,KAAK,CAA7B;;AAEA,QAAI7C,gBAAgB,CAACW,OAAD,CAApB,EAA+B;AAC7BkC,MAAAA,iBAAiB,GAAGvB,SAAS,GAAG,CAAC,GAAGzC,KAAK,CAACyB,OAAV,EAAmBa,WAAW,CAACM,OAAZ,CAAoB,KAAKO,KAAzB,EAAgCV,SAAhC,CAAnB,EAA+DiB,aAA/D,CAAH,GAAmF,CAAC,GAAG1D,KAAK,CAACyB,OAAV,EAAmBa,WAAW,CAACM,OAAZ,CAAoBO,KAApB,CAAnB,EAA+CI,EAA/C,CAAhH;AACD,KAFD,MAEO;AACLS,MAAAA,iBAAiB,GAAGvB,SAAS,GAAG,CAAC,GAAGzC,KAAK,CAACyB,OAAV,EAAmBa,WAAW,CAACG,SAAD,CAA9B,EAA2CiB,aAA3C,CAAH,GAA+D,CAAC,GAAG1D,KAAK,CAACyB,OAAV,EAAmBa,WAAnB,EAAgCiB,EAAhC,CAA5F;AACD;;AAED,WAAOM,mBAAmB,CAACG,iBAAD,CAA1B;AACD;;AAED,MAAIL,KAAK,CAACM,iBAAV,EAA6B;AAC3B,WAAON,KAAK,CAACM,iBAAb;AACD;;AAED,SAAOL,YAAP;AACD;;AAED,SAAStC,YAAT,CAAsBgB,WAAtB,EAAmCR,OAAnC,EAA4CyB,EAA5C,EAAgD;AAC9C,MAAIJ,KAAK,GAAGlC,QAAQ,CAACa,OAAD,CAApB;;AAEA,MAAIoC,sBAAsB,GAAGZ,4BAA4B,CAACC,EAAD,CAAzD;AAAA,MACId,SAAS,GAAGyB,sBAAsB,CAACzB,SADvC;AAAA,MAEIiB,aAAa,GAAGQ,sBAAsB,CAACR,aAF3C;;AAIA,MAAIvC,gBAAgB,CAACW,OAAD,CAAhB,IAA6BqC,OAAO,CAAC7B,WAAW,CAACM,OAAb,CAAxC,EAA+D;AAC7D,WAAOH,SAAS,GAAGnC,QAAQ,CAAC,EAAD,EAAKgC,WAAL,EAAkB;AAC3CM,MAAAA,OAAO,EAAEtC,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACM,OAAjB,EAA0BlB,eAAe,CAAC,EAAD,EAAKyB,KAAL,EAAY7C,QAAQ,CAAC,EAAD,EAAKgC,WAAW,CAACM,OAAZ,CAAoBO,KAApB,CAAL,EAAiCzB,eAAe,CAAC,EAAD,EAAKe,SAAL,EAAgB,CAAC,GAAGtC,MAAM,CAACsB,OAAX,EAAoBa,WAAW,CAACM,OAAZ,CAAoBO,KAApB,EAA2BV,SAA3B,CAApB,EAA2D,KAAKiB,aAAhE,CAAhB,CAAhD,CAApB,CAAzC;AAD0B,KAAlB,CAAX,GAEX,CAAC,GAAGvD,MAAM,CAACsB,OAAX,EAAoBa,WAApB,EAAiC,aAAaa,KAAb,GAAqB,GAArB,GAA2BI,EAA5D,CAFL;AAGD,GAJD,MAIO;AACL,WAAOd,SAAS,GAAGnC,QAAQ,CAAC,EAAD,EAAKgC,WAAL,EAAkBZ,eAAe,CAAC,EAAD,EAAKe,SAAL,EAAgB,CAAC,GAAGtC,MAAM,CAACsB,OAAX,EAAoBa,WAAW,CAACG,SAAD,CAA/B,EAA4C,KAAKiB,aAAjD,CAAhB,CAAjC,CAAX,GAAgI,CAAC,GAAGvD,MAAM,CAACsB,OAAX,EAAoBa,WAApB,EAAiC,KAAKiB,EAAtC,CAAhJ;AACD;AACF","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _get2 = require('lodash/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _omit2 = require('lodash/omit');\n\nvar _omit3 = _interopRequireDefault(_omit2);\n\nvar _has2 = require('lodash/has');\n\nvar _has3 = _interopRequireDefault(_has2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.getIndex = getIndex;\nexports.getResults = getResults;\nexports.hasMultipleIndex = hasMultipleIndex;\nexports.refineValue = refineValue;\nexports.getCurrentRefinementValue = getCurrentRefinementValue;\nexports.cleanUpValue = cleanUpValue;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction getIndex(context) {\n  return context && context.multiIndexContext ? context.multiIndexContext.targetedIndex : context.ais.mainTargetedIndex;\n}\n\nfunction getResults(searchResults, context) {\n  if (searchResults.results && !searchResults.results.hits) {\n    return searchResults.results[getIndex(context)] ? searchResults.results[getIndex(context)] : null;\n  } else {\n    return searchResults.results ? searchResults.results : null;\n  }\n}\n\nfunction hasMultipleIndex(context) {\n  return context && context.multiIndexContext;\n}\n\n// eslint-disable-next-line max-params\nfunction refineValue(searchState, nextRefinement, context, resetPage, namespace) {\n  if (hasMultipleIndex(context)) {\n    return namespace ? refineMultiIndexWithNamespace(searchState, nextRefinement, context, resetPage, namespace) : refineMultiIndex(searchState, nextRefinement, context, resetPage);\n  } else {\n    // When we have a multi index page with shared widgets we should also\n    // reset their page to 1 if the resetPage is provided. Otherwise the\n    // indices will always be reset\n    // see: https://github.com/algolia/react-instantsearch/issues/310\n    // see: https://github.com/algolia/react-instantsearch/issues/637\n    if (searchState.indices && resetPage) {\n      Object.keys(searchState.indices).forEach(function (targetedIndex) {\n        searchState = refineValue(searchState, { page: 1 }, { multiIndexContext: { targetedIndex: targetedIndex } }, true, namespace);\n      });\n    }\n    return namespace ? refineSingleIndexWithNamespace(searchState, nextRefinement, resetPage, namespace) : refineSingleIndex(searchState, nextRefinement, resetPage);\n  }\n}\n\nfunction refineMultiIndex(searchState, nextRefinement, context, resetPage) {\n  var page = resetPage ? { page: 1 } : undefined;\n  var index = getIndex(context);\n  var state = (0, _has3.default)(searchState, 'indices.' + index) ? _extends({}, searchState.indices, _defineProperty({}, index, _extends({}, searchState.indices[index], nextRefinement, page))) : _extends({}, searchState.indices, _defineProperty({}, index, _extends({}, nextRefinement, page)));\n  return _extends({}, searchState, { indices: state });\n}\n\nfunction refineSingleIndex(searchState, nextRefinement, resetPage) {\n  var page = resetPage ? { page: 1 } : undefined;\n  return _extends({}, searchState, nextRefinement, page);\n}\n\n// eslint-disable-next-line max-params\nfunction refineMultiIndexWithNamespace(searchState, nextRefinement, context, resetPage, namespace) {\n  var _extends4;\n\n  var index = getIndex(context);\n  var page = resetPage ? { page: 1 } : undefined;\n  var state = (0, _has3.default)(searchState, 'indices.' + index) ? _extends({}, searchState.indices, _defineProperty({}, index, _extends({}, searchState.indices[index], (_extends4 = {}, _defineProperty(_extends4, namespace, _extends({}, searchState.indices[index][namespace], nextRefinement)), _defineProperty(_extends4, 'page', 1), _extends4)))) : _extends({}, searchState.indices, _defineProperty({}, index, _extends(_defineProperty({}, namespace, nextRefinement), page)));\n  return _extends({}, searchState, { indices: state });\n}\n\nfunction refineSingleIndexWithNamespace(searchState, nextRefinement, resetPage, namespace) {\n  var page = resetPage ? { page: 1 } : undefined;\n  return _extends({}, searchState, _defineProperty({}, namespace, _extends({}, searchState[namespace], nextRefinement)), page);\n}\n\nfunction getNamespaceAndAttributeName(id) {\n  var parts = id.match(/^([^.]*)\\.(.*)/);\n  var namespace = parts && parts[1];\n  var attributeName = parts && parts[2];\n\n  return { namespace: namespace, attributeName: attributeName };\n}\n\n// eslint-disable-next-line max-params\nfunction getCurrentRefinementValue(props, searchState, context, id, defaultValue, refinementsCallback) {\n  var index = getIndex(context);\n\n  var _getNamespaceAndAttri = getNamespaceAndAttributeName(id),\n      namespace = _getNamespaceAndAttri.namespace,\n      attributeName = _getNamespaceAndAttri.attributeName;\n\n  var refinements = hasMultipleIndex(context) && searchState.indices && namespace && searchState.indices['' + index] && (0, _has3.default)(searchState.indices['' + index][namespace], '' + attributeName) || hasMultipleIndex(context) && searchState.indices && (0, _has3.default)(searchState, 'indices.' + index + '.' + id) || !hasMultipleIndex(context) && namespace && (0, _has3.default)(searchState[namespace], attributeName) || !hasMultipleIndex(context) && (0, _has3.default)(searchState, id);\n  if (refinements) {\n    var currentRefinement = void 0;\n\n    if (hasMultipleIndex(context)) {\n      currentRefinement = namespace ? (0, _get3.default)(searchState.indices['' + index][namespace], attributeName) : (0, _get3.default)(searchState.indices[index], id);\n    } else {\n      currentRefinement = namespace ? (0, _get3.default)(searchState[namespace], attributeName) : (0, _get3.default)(searchState, id);\n    }\n\n    return refinementsCallback(currentRefinement);\n  }\n\n  if (props.defaultRefinement) {\n    return props.defaultRefinement;\n  }\n\n  return defaultValue;\n}\n\nfunction cleanUpValue(searchState, context, id) {\n  var index = getIndex(context);\n\n  var _getNamespaceAndAttri2 = getNamespaceAndAttributeName(id),\n      namespace = _getNamespaceAndAttri2.namespace,\n      attributeName = _getNamespaceAndAttri2.attributeName;\n\n  if (hasMultipleIndex(context) && Boolean(searchState.indices)) {\n    return namespace ? _extends({}, searchState, {\n      indices: _extends({}, searchState.indices, _defineProperty({}, index, _extends({}, searchState.indices[index], _defineProperty({}, namespace, (0, _omit3.default)(searchState.indices[index][namespace], '' + attributeName)))))\n    }) : (0, _omit3.default)(searchState, 'indices.' + index + '.' + id);\n  } else {\n    return namespace ? _extends({}, searchState, _defineProperty({}, namespace, (0, _omit3.default)(searchState[namespace], '' + attributeName))) : (0, _omit3.default)(searchState, '' + id);\n  }\n}"]},"metadata":{},"sourceType":"script"}